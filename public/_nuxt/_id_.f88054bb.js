import{_ as xo}from"./back.caa019d8.js";import{_ as oe}from"./status-block.2197ddaa.js";import{a as uo,Z as co,r as u,e as po,b as mo,i as h,ac as L,x as fo,L as jo,Q as $,k as vo,o as p,l as f,m as n,E as g,F as w,t as i,q as z,p as D,S as Uo,s as ko,v as Io,V as ee,Y as ne,c as ro,C as P,K as Lo,W as se,w as J,$ as ie,f6 as ae,f as te,f9 as E,fg as No,A as le,j as H,z as M,X as re,R as lo,N as de,O as ue,G as ce,T as pe,U as me}from"./entry.08441bee.js";import{_ as Bo,a as Eo}from"./icon-arrow_2x.db44c7c5.js";import{_ as fe}from"./apr-tab.22ad565b.js";import{_ as ve}from"./apr-tips.a92f0ae5.js";import{p as ke}from"./precision.ce0280e5.js";import"./index.c0d3b462.js";const Ie=uo({props:{positionInfo:{type:Object,required:!0}},setup(o){const{t:m}=co();let N=u(!1),q=u(!0);const I=po(),_=mo(),d=h(()=>_),k=h(()=>{var c,T,a,F,e,v,G,V;const S=o.positionInfo.amountA*((T=d.value.RATES[(c=o.positionInfo)==null?void 0:c.token_a.address])==null?void 0:T.price),C=o.positionInfo.amountB*((F=d.value.RATES[(a=o.positionInfo)==null?void 0:a.token_b.address])==null?void 0:F.price);return((v=d.value.RATES[(e=o.positionInfo)==null?void 0:e.token_a.address])==null?void 0:v.price)&&((V=d.value.RATES[(G=o.positionInfo)==null?void 0:G.token_b.address])==null?void 0:V.price)?S+C:" --"}),b=h(()=>{var S,C,c,T;return((C=d.value.RATES[(S=o.positionInfo)==null?void 0:S.token_a.name.toUpperCase()])==null?void 0:C.price)&&k.value!=="--"?(o.positionInfo.amountA*((T=d.value.RATES[(c=o.positionInfo)==null?void 0:c.token_a.name.toUpperCase()])==null?void 0:T.price)/k.value*100).toFixed(0):" --"}),j=h(()=>{var S,C,c,T;return((C=d.value.RATES[(S=o.positionInfo)==null?void 0:S.token_b.name.toUpperCase()])==null?void 0:C.price)&&k.value!=="--"?(o.positionInfo.amountB*((T=d.value.RATES[(c=o.positionInfo)==null?void 0:c.token_b.name.toUpperCase()])==null?void 0:T.price)/k.value*100).toFixed(0):" --"}),U=h(()=>d.value.tokensObj&&o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.address&&d.value.tokensObj[o.positionInfo.token_a.address]&&d.value.tokensObj[o.positionInfo.token_a.address].logoURI),X=h(()=>d.value.tokensObj&&o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.address&&d.value.tokensObj[o.positionInfo.token_b.address]&&d.value.tokensObj[o.positionInfo.token_b.address].logoURI);return console.log(o.positionInfo,"===>positionInfo"),{fromPercent:j,toPercent:b,amountUSD:k,showNum:L,t:m,importIcon:fo,indexStore:I,rateChange:q,decimalFormat:jo,fromCoinUrl:U,toCoinUrl:X,pools:d,addCommom:$,isPc:N}}});const be=o=>(ko("data-v-c4a61f98"),o=o(),Io(),o),ge={class:"position-card"},he={class:"coin-pair"},_e=["src"],we=["src"],ye={class:"fee"},$e={class:"right"},Ce={key:0,class:"status"},Te={class:"min-and-max"},Ae={key:0},Re={class:"text"},Se={key:0,src:Bo,alt:""},Oe={key:1,src:Eo,alt:""},Pe={class:"text"},Ne={key:1},je={class:"text"},Ue={key:0,src:Bo,alt:""},Le={key:1,src:Eo,alt:""},Be={class:"text"},Ee=be(()=>n("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),De=[Ee],qe={class:"liquidity"},Fe={class:"label"},We={class:"value"},He={class:"token-num"},Me={class:"item"},ze=["src"],Ge={class:"rate"},Ke={class:"item"},Qe=["src"],Xe={class:"rate"};function Ye(o,m,N,q,I,_){const d=Uo,k=oe;return p(),f("div",ge,[n("div",{class:z(["left",`position-status-${o.positionInfo&&o.positionInfo.currentStatus&&o.positionInfo.currentStatus.toLowerCase()}`])},[g(d,{class:"left-skeleton",loading:o.pools.currentPositionLoading,active:"",paragraph:!1},{default:w(()=>[n("div",he,[n("div",null,[n("img",{src:o.fromCoinUrl||o.importIcon(`/image/coins/${o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol.toLowerCase()}.png`)},null,8,_e),n("img",{src:o.toCoinUrl||o.importIcon(`/image/coins/${o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol.toLowerCase()}.png`)},null,8,we)]),n("span",null,i(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol)+" - "+i(o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol),1)]),n("div",ye,i(o.$t("common.fee"))+" "+i(o.positionInfo.fee*100)+"%",1)]),_:1},8,["loading"])],2),n("div",$e,[o.pools.currentPositionLoading?D("",!0):(p(),f("div",Ce,[g(k,{"current-status":o.positionInfo.currentStatus||"","block-name":"detail"},null,8,["current-status"])])),g(d,{loading:o.pools.currentPositionLoading,active:"",paragraph:!1},{default:w(()=>[n("div",Te,[o.rateChange?(p(),f("div",Ae,[n("div",Re,i(o.addCommom(o.decimalFormat(String(o.positionInfo.minPrice),6))),1),o.indexStore.theme=="default"?(p(),f("img",Se)):(p(),f("img",Oe)),n("div",Pe,i(o.positionInfo&&o.positionInfo.maxPrice&&o.positionInfo.maxPrice.indexOf("\u221E")>-1||o.positionInfo&&o.positionInfo.maxPrice&&o.positionInfo.maxPrice.indexOf("+")>-1?"\u221E":o.addCommom(o.decimalFormat(String(o.positionInfo.maxPrice),6)))+" "+i(o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol)+" per "+i(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol),1)])):(p(),f("div",Ne,[n("div",je,i(o.addCommom(o.decimalFormat(String(1/Number(o.positionInfo.maxPrice)),6))),1),o.indexStore.theme=="default"?(p(),f("img",Ue)):(p(),f("img",Le)),n("div",Be,i(o.positionInfo&&o.positionInfo.maxPrice&&o.positionInfo.maxPrice.indexOf("\u221E")>-1||o.positionInfo&&o.positionInfo.maxPrice&&o.positionInfo.maxPrice.indexOf("+")>-1?"\u221E":o.addCommom(o.decimalFormat(String(1/Number(o.positionInfo.minPrice)),6),6))+" "+i(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol)+" per "+i(o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol),1)])),(p(),f("svg",{class:"icon-change","aria-hidden":"true",onClick:m[0]||(m[0]=b=>o.rateChange=!o.rateChange)},De))])]),_:1},8,["loading"]),n("div",qe,[g(d,{loading:o.pools.currentPositionLoading,active:"",paragraph:!1},{default:w(()=>[n("div",Fe,i(o.$t("common.liquidity")),1),n("div",We," $"+i(o.amountUSD=="--"?"--":Number(o.amountUSD)==0?0:Number(o.amountUSD)<.01?"<0.01":o.addCommom(o.amountUSD,2)),1)]),_:1},8,["loading"])]),n("div",He,[g(d,{loading:o.pools.currentPositionLoading,active:"",paragraph:!1},{default:w(()=>[n("div",Me,[n("div",null,[n("img",{src:o.fromCoinUrl||o.importIcon(`/image/coins/${o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol.toLowerCase()}.png`)},null,8,ze),n("p",null,i(o.showNum(o.positionInfo.amountA,o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.decimals)),1),n("span",null,i(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol)+" "+i(o.positionInfo.token_a.labels&&o.positionInfo.token_a.labels[0]?`(${o.positionInfo.token_a.labels[0]})`:""),1)]),n("div",Ge,i(o.addCommom(o.positionInfo.fromPercent,0))+"% ",1)]),n("div",Ke,[n("div",null,[n("img",{src:o.toCoinUrl||o.importIcon(`/image/coins/${o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol.toLowerCase()}.png`)},null,8,Qe),n("p",null,i(o.showNum(o.positionInfo.amountB,o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.decimals)),1),n("span",null,i(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_b.symbol)+" "+i(o.positionInfo.token_b.labels&&o.positionInfo.token_b.labels[0]?`(${o.positionInfo.token_b.labels[0]})`:""),1)]),n("div",Xe,i(o.addCommom(o.positionInfo.toPercent,0))+"%",1)])]),_:1},8,["loading"])])])])}const Ze=vo(Ie,[["render",Ye],["__scopeId","data-v-c4a61f98"]]),Je=uo({components:{Modal:ee},props:{positionInfo:{type:Object,required:!0},isLoading:{type:Boolean,required:!0}},setup(o,m){const{t:N,locale:q}=co(),I=po(),{copy:_}=I,d=()=>{m.emit("toClaim")},k=mo(),b=h(()=>k),j=h(()=>b.value.tokensObj&&o.positionInfo.token_a.address&&b.value.tokensObj[o.positionInfo.token_a.address]&&b.value.tokensObj[o.positionInfo.token_a.address].logoURI),U=h(()=>b.value.tokensObj&&o.positionInfo.token_b.address&&b.value.tokensObj[o.positionInfo.token_b.address]&&b.value.tokensObj[o.positionInfo.token_b.address].logoURI);return{showNum:L,fromCoinUrl:j,toCoinUrl:U,toClaim:d,t:N,addCommom:$,importIcon:fo,store:I,copy:_}}});const Ve=o=>(ko("data-v-39d55de9"),o=o(),Io(),o),xe=Ve(()=>n("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),on={class:"claim-container"},en={key:0,class:"pc-claim"},nn=["src"],sn={key:1,class:"pc-claim"},an=["src"];function tn(o,m,N,q,I,_){const d=Lo,k=ne("Modal");return p(),ro(k,{visible:!0,class:"claim-fees",centered:"",closable:!0,title:o.$t("modal.claimFees"),width:"400px",footer:null,onCancel:m[0]||(m[0]=b=>o.$emit("onClose"))},{closeIcon:w(()=>[xe]),default:w(()=>[n("div",on,[o.positionInfo&&o.positionInfo.token_a.symbol?(p(),f("div",en,[n("img",{src:o.fromCoinUrl||o.importIcon(`/image/coins/${o.positionInfo.token_a.symbol.toLowerCase()}.png`)},null,8,nn),n("span",null,i(o.showNum(o.positionInfo.feeOwedA,o.positionInfo.token_a.decimals))+" "+i(o.positionInfo.token_a.symbol),1)])):D("",!0),o.positionInfo&&o.positionInfo.token_b.symbol?(p(),f("div",sn,[n("img",{src:o.toCoinUrl||o.importIcon(`/image/coins/${o.positionInfo.token_b.symbol.toLowerCase()}.png`)},null,8,an),n("span",null,i(o.showNum(o.positionInfo.feeOwedB,o.positionInfo.token_b.decimals))+" "+i(o.positionInfo.token_b.symbol),1)])):D("",!0)]),g(d,{class:"big-btn claim-btn",disabled:o.isLoading||o.addCommom(o.positionInfo.feeOwedA,o.positionInfo.token_a.decimals)==0&&o.addCommom(o.positionInfo.feeOwedB,o.positionInfo.token_b.decimals)==0||o.positionInfo.poolInfo.is_pause,onClick:o.toClaim},{default:w(()=>[P(i(o.$t("common.claim")),1)]),_:1},8,["disabled","onClick"])]),_:1},8,["title"])}const ln=vo(Je,[["render",tn],["__scopeId","data-v-39d55de9"]]),rn=uo({setup(){const o=u(!1),m=u(!1),N=u(!1),q=u(!0),I=po(),_=h(()=>I),d=mo(),k=u(""),b=u(""),j=u(""),U=u(30),X=u("Estimated APR"),S=u([{time:"24H",num:24},{time:"7D",num:7},{time:"30D",num:30}]),C=u(!0),c=s=>{console.log(s,"====>>>>item",s.num,U.value),U.value=s.num},T=()=>{C.value=!C.value},a=h(()=>d),F=h(()=>{var r,l,y,O;const s=e.value.feeOwedA*((r=a.value.RATES[e.value&&e.value.token_a&&e.value.token_a.address])==null?void 0:r.price),t=e.value.feeOwedB*((l=a.value.RATES[e.value&&e.value.token_b&&e.value.token_b.address])==null?void 0:l.price);return((y=a.value.RATES[e.value&&e.value.token_a&&e.value.token_a.address])==null?void 0:y.price)&&((O=a.value.RATES[e.value&&e.value.token_b&&e.value.token_b.address])==null?void 0:O.price)?s+t:" --"}),e=u(a.value.currentPositionInfo||{}),v=se();function G(){v.push(`/remove-liquidity?collect=${e.value.collectionName}&&token=${e.value.tokenName}&&address=${e.value.pool}&pos=${e.value.pos_object_id}`)}function V(){v.push(`/increase-liquidity?collect=${e.value.collectionName}&&token=${e.value.tokenName}&&address=${e.value.pool}&pos=${e.value.pos_object_id}`)}const Do=()=>{eo(),N.value=!0,setTimeout(()=>{N.value=!1},1e3)},A=h(()=>_.value.chainName?le(_.value.chainName):{}),eo=async()=>{a.value.setCurrentPositionLoading(!0);const s=v.currentRoute.value.query.token||"",t=v.currentRoute.value.query.collect||"",r=v.currentRoute.value.query.address||"",l=v.currentRoute.value.query.pos||"";b.value=r,_.value.chainName==="Aptos"?s&&t&&r&&(k.value=t,j.value=s,a.value.setCurrentPositionInfo(b.value,k.value,j.value,_.value.chainName)):s&&r&&l&&(k.value=t,j.value=s,a.value.setCurrentPositionInfo(r,k.value,j.value,_.value.chainName,l))},qo=h(()=>{var t,r,l;const s=((l=(r=(t=v==null?void 0:v.currentRoute)==null?void 0:t.value)==null?void 0:r.query)==null?void 0:l.address)||"";return s&&a.value.addressLpTokens&&!H(a.value.addressLpTokens)&&a.value.addressLpTokens[s]?a.value.addressLpTokens[s]:null});J(()=>qo.value,(s,t)=>{s&&!H(s)&&s.current_sqrt_price!==(t==null?void 0:t.current_sqrt_price)&&eo()},{immediate:!0});const bo=u(""),go=u(""),ho=u(""),Fo=(s,t)=>s&&t?M(ke.plus(lo(s),lo(t)),2)+"%":s,_o=s=>{let t=0;return s&&s.forEach(r=>{console.log(r,"===>ele"),t+=lo(String(r))}),String(M(String(t),2))},wo=u(""),yo=u("");J(()=>[_.value.newTopPoolsObj,e.value,U],([s,t])=>{if(!H(s)&&!H(t)){const r=t.poolAddress,l=s[r];bo.value=l&&l.apr_7day,yo.value=_o(l&&l.rewarder_apr),wo.value=Fo(l&&l.apr_7day,l&&_o(l.rewarder_apr)),go.value=l&&M(l.tvl_in_usd,2),ho.value=l&&M(l.vol_in_usd_24h,2)}},{immediate:!0,deep:!0});const Wo=ie(),K=h(()=>Wo),{t:no}=co(),{$notify:$o}=ae(),Ho=async()=>{o.value=!0,m.value=!1,I.setTransactionDesc(no("newAdd.claimWaitingText",{from:$(e.value.feeOwedA,e.value.token_a.decimals)==0?"":`${L(e.value.feeOwedA,e.value.token_a.decimals)} ${e.value.token_a.symbol}`,and:$(e.value.feeOwedA,e.value.token_a.decimals)==0||$(e.value.feeOwedB,e.value.token_b.decimals)==0?"":"and",to:$(e.value.feeOwedB,e.value.token_b.decimals)==0?"":`${L(e.value.feeOwedB,e.value.token_b.decimals)} ${e.value.token_b.symbol}`})),I.setIsShowWaiting(!0);let s;const t={pool:e.value.poolInfo,position:e.value};try{const r=await A.value.getCollectFeeTransactionPayload(t);if(_.value.chainName==="Aptos")s=await K.value.currentWallet.signAndSubmitTransaction(r);else{const l=await K.value.currentWallet.signAndExecuteTransaction(r);s=A.value.handleTx(l)}if(s){I.setTransactionTxid(s.hash),I.setIsShowWaiting(!1),I.setIsShowSuccess(!0);const l={title:"Claim",desc:"",hash:s.hash,tit:"Fees Claimed",icon:"icon-icon-Removed",tokenInfo:{tokena:`${e.value.token_a.symbol}`,numa:$(e.value.feeOwedA,e.value.token_a.decimals)==0?"":`+ ${L(e.value.feeOwedA,e.value.token_a.decimals)}`,logoa:$(e.value.feeOwedA,e.value.token_a.decimals)==0?"":a.value.tokensObj&&e.value&&e.value.token_a.address&&a.value.tokensObj[e.value.token_a.address]&&a.value.tokensObj[e.value.token_a.address].logoURI,tokenb:`${e.value.token_b.symbol}`,numb:$(e.value.feeOwedB,e.value.token_b.decimals)==0?"":`+ ${L(e.value.feeOwedB,e.value.token_b.decimals)}`,logob:$(e.value.feeOwedB,e.value.token_b.decimals)==0?"":a.value.tokensObj&&e.value&&e.value.token_b.address&&a.value.tokensObj[e.value.token_b.address]&&a.value.tokensObj[e.value.token_b.address].logoURI},text:`Claim ${$(e.value.feeOwedA,e.value.token_a.decimals)==0?"":`${L(e.value.feeOwedA,e.value.token_a.decimals)} ${e.value.token_a.symbol}`}  
              ${$(e.value.feeOwedA,e.value.token_a.decimals)==0||$(e.value.feeOwedB,e.value.token_b.decimals)==0?"":"and"} ${$(e.value.feeOwedB,e.value.token_b.decimals)==0?"":`${L(e.value.feeOwedB,e.value.token_b.decimals)} ${e.value.token_b.symbol}`}

            `};A.value.showTransitionPending(l);const y=await A.value.watchTransaction(l);console.log("0310##toClaim###transitionStatus####",y),y&&setTimeout(()=>{eo()},1e3)}else I.setIsShowWaiting(!1),I.setIsShowRejected(!0),$o.error({icon:E("svg",{class:{icon:!0},"aria-hidden":!0},[E("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),duration:4.5,message:E("div",{class:"notification-title"},[E("span",{innerHTML:No.global.t("newAdd.claimFailed")},null)]),description:no("newAdd.somethingWrong"),class:"ant-notification-copy ant-notification-error"});o.value=!1,console.log("claim####test###",s)}catch(r){console.log("claim###error####",r),o.value=!1,I.setIsShowWaiting(!1),I.setIsShowRejected(!0),$o.error({icon:E("svg",{class:{icon:!0},"aria-hidden":!0},[E("use",{"xlink:href":"#icon-a-icon-Shutdown"})]),message:E("div",{class:"notification-title"},[E("span",{innerHTML:No.global.t("newAdd.claimFailed")},null)]),duration:4.5,description:no("newAdd.somethingWrong"),class:"ant-notification-copy ant-notification-error"})}},so=u(""),io=u(""),Mo=()=>{so.value=e.value.token_b,io.value=e.value.token_a},Co=async(s=null)=>{const t=s||e.value,r=a.value.addressLpTokens[v.currentRoute.value.query.address];console.log("0309###getRewarder###pools.value.addressLpTokens###",a.value.addressLpTokens),console.log("0309###getRewarder###pool###",r);const l=await A.value.getTickDataByIndex(r.ticks_handle,Number(t.tick_lower_index)),y=await A.value.getTickDataByIndex(r.ticks_handle,Number(t.tick_upper_index));let O={};To.value==="Aptos"?O=await A.value.getPosRewardersAmount({poolAddress:v.currentRoute.value.query.address,positionName:v.currentRoute.value.query.token,tickLowerData:l,tickUpperData:y}):O=await A.value.getPosRewardersAmount({poolAddress:v.currentRoute.value.query.address,positionName:v.currentRoute.value.query.token,tickLowerData:l,tickUpperData:y,pos:v.currentRoute.value.query.pos});const W=[];let B=0;O.forEach((R,Y)=>{if(t.poolInfo[`rewarder_display${Y+1}`]){const Z=a.value.newTokenObj[R.coin_address].decimals,Jo=a.value.newTokenObj[R.coin_address];console.log(R.amount_owed.toString(),"===>element.amount_owed.toString()");const Oo=Number(R.amount_owed.toString())/Math.pow(10,Z),Vo=a.value.RATES[R.coin_address].price,Po=Oo*Vo;B+=Po,W.push({...R,...Jo,amount:M(Oo,Z),amountUSD:M(Po,2)})}}),x.value=W,console.log(W,"====>result722"),ao.value=B,Ao.value=Number(M(B,2))};J(()=>a.value.currentPositionInfo,s=>{s&&(e.value=s,so.value=s==null?void 0:s.token_a,io.value=s==null?void 0:s.token_b,console.log(s,"positionInfo.valuepositionInfo.value"))},{immediate:!0});const zo=h(()=>(console.log(a.value.tokensObj,"===>pools.value.tokensObj"),console.log(e.value.token_a.address,"===>positionInfo.value.token_a.address"),a.value.tokensObj&&e&&e.value.token_a&&e.value.token_a.address&&a.value.tokensObj[e.value.token_a.address]&&a.value.tokensObj[e.value.token_a.address].logoURI)),Go=h(()=>a.value.tokensObj&&e&&e.value.token_b&&e.value.token_b.address&&a.value.tokensObj[e.value.token_b.address]&&a.value.tokensObj[e.value.token_b.address].logoURI),To=h(()=>_.value.chainName),Ko=h(()=>re[To.value]),ao=u(0),x=u([]),Ao=u(0);te(()=>{ao.value=0,x.value=[],Ao.value=0});const{setIsShowSuccess:Qo,setIsShowRejected:Ro,setIsShowWaiting:to,setTransactionDesc:cs,setTransactionTxid:Xo}=I,oo=u(!1),Yo=async()=>{console.log("0310###toClaimRewards##start"),oo.value=!0;const s=x.value;let t={coinTypeA:e.value.poolInfo.coinTypeA,coinTypeB:e.value.poolInfo.coinTypeB,coinTypeC:"",coinTypeD:"",coinTypeE:"",pool_address:e.value.poolAddress,pos_index:e.value.index,rewarder_nums:s.length};t.coinTypeC=s[0]?s[0].coin_address:"",t.coinTypeD=s[1]?s[1].coin_address:"",t.coinTypeE=s[2]?s[2].coin_address:"",console.log(t,"===>collectRewarderParams");try{const r=await A.value.getCollectRewarderTransactionPayload(t);let l;if(_.value.chainName==="Aptos")l=await K.value.currentWallet.signAndSubmitTransaction(r);else{const y=await K.value.currentWallet.signAndExecuteTransaction(r);l=A.value.handleTx(y)}if(console.log("0310###toClaimRewards##tx###",l),l&&l.hash){Xo(l.hash),to(!1),Qo(!0);const y=s[0].amount+s[0].symbol,O=t.coinTypeD?" and "+s[1].amount+s[1].symbol:"",W=t.coinTypeE?" and "+s[2].amount+s[2].symbol:"",B={title:"Claim",desc:"",hash:l.hash,tit:"Bonus Claimed",icon:"icon-icon-Removed",tokenInfo:{tokena:s[0].symbol,numa:`+ ${Number(s[0].amount)}`,logoa:a.value.tokensObj&&s[0]&&s[0].address&&a.value.tokensObj[s[0].address]&&a.value.tokensObj[s[0].address].logoURI,tokenb:t.coinTypeD?s[1].symbol:"",numb:t.coinTypeD?`+ ${Number(s[1].amount)}`:"",logob:t.coinTypeD?a.value.tokensObj&&s[1]&&s[1].address&&a.value.tokensObj[s[1].address]&&a.value.tokensObj[s[1].address].logoURI:"",tokenc:t.coinTypeE?s[2].symbol:"",numc:t.coinTypeE?`+ ${Number(s[2].amount)}`:"",logoc:t.coinTypeE?a.value.tokensObj&&s[2]&&s[2].address&&a.value.tokensObj[s[2].address]&&a.value.tokensObj[s[2].address].logoURI:""},text:y+O+W};A.value.showTransitionPending(B);const R=await A.value.watchTransaction(B);console.log("0310###toClaimRewards###transitionStatus###",R),R&&setTimeout(()=>{Co(),A.value.getAccount(K.value.address)},1e3)}else console.log("0310###toClaimRewards###else###"),to(!1),Ro(!0);oo.value=!1}catch(r){console.log("0310###Claim Error###",r),oo.value=!1,to(!1),Ro(!0)}};console.log(e,"===>positionInfo");const So=u([]);J(()=>[e.value,a.value.addressLpTokens,a.value.newTokenObj,_.value.newTopPoolsObj],([s,t,r,l])=>{if(!H(s)&&!H(t)&&!H(r)){const y=s.address,O=t[y];let W=O.rewarder_infos||[];const B=l[y],R=[];W.forEach((Y,Z)=>{O[`rewarder_display${Z+1}`]&&R.push({...Y,symbol:r[Y.coinAddress].symbol,rewarderApr:B.rewarder_apr[Z],logoUrl:r[Y.coinAddress].logoURI})}),So.value=R,Co(s)}},{immediate:!0});const Zo=u();return J(()=>a.value.RATES,s=>{s&&(Zo.value=s)},{immediate:!0}),{rewarderArr:So,feeOwed:F,config:Ko,showNum:L,index:_,fromCoinUrl:zo,toCoinUrl:Go,toggle:Mo,fromCoin:so,toCoin:io,apr:bo,liquidityTvl:go,vol24:ho,addCommom:$,decimalFormat:jo,wallet:K,isLoading:o,toClaim:Ho,pools:a,positionInfo:e,importIcon:fo,router:v,toRemove:G,toIncrease:V,isShowClaim:m,direct:q,refresh:N,clickRefresh:Do,pendingRewarderArr:x,pendingRewarder:ao,toClaimRewards:Yo,rewarderLoading:oo,aprRewardsParameter:U,aprRewardsDateList:S,aprTab:c,reviseValue:T,label:C,aprTitle:X,aprTotal:wo,rewardAprList:yo}}});const Q=o=>(ko("data-v-254de755"),o=o(),Io(),o),dn={key:0,class:"position-detail-container"},un={class:"position-detail-header"},cn={class:"back-and-refresh"},pn=Q(()=>n("use",{"xlink:href":"#icon-icon-refresh"},null,-1)),mn=[pn],fn={class:"action-position"},vn={class:"coin-pair"},kn=Q(()=>n("use",{"xlink:href":"#icon-icon-copy"},null,-1)),In=[kn],bn=["href"],gn=Q(()=>n("svg",{class:"icon","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-icon-jump"})],-1)),hn=[gn],_n=["href"],wn=Q(()=>n("svg",{class:"icon","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-icon-jump"})],-1)),yn=[wn],$n={class:"acton-btn-box"},Cn=Q(()=>n("svg",{"aria-hidden":"true",class:"action-icon"},[n("use",{"xlink:href":"#icon-icon-Reduction"})],-1)),Tn=Q(()=>n("svg",{"aria-hidden":"true",class:"action-icon"},[n("use",{"xlink:href":"#icon-icon-add"})],-1)),An={class:"position-content"},Rn={class:"pedding-fee pedding-apr"},Sn={class:"pedding-fee"},On={class:"top"},Pn={class:"left"},Nn={class:"bottom"},jn=["src"],Un=["src"],Ln={key:0,class:"pedding-fee"},Bn={class:"top"},En={class:"left"},Dn={class:"bottom"},qn=["src"],Fn={key:1,class:"poolInfo"},Wn={class:"pool-info-title"},Hn={class:"currentPrice"},Mn={key:0,class:"coin"},zn={key:1,class:"coin"},Gn={class:"toggle"},Kn=["src"],Qn=["src"],Xn={key:0},Yn={class:"info-block-container"},Zn={class:"info-block"},Jn={class:"leabl"},Vn={class:"text"},xn={class:"apr-hover-content"},os={class:"info-block"},es={class:"leabl"},ns={class:"text"},ss={class:"info-block"},is={class:"leabl"},as={class:"text"},ts={class:"info-block"},ls={class:"leabl"},rs={class:"text"},ds={class:"loading-global"};function us(o,m,N,q,I,_){const d=xo,k=Lo,b=Uo,j=Ze,U=fe,X=ve,S=ln,C=me;return o.positionInfo?(p(),f("div",dn,[n("div",un,[n("div",cn,[g(d),(p(),f("svg",{"aria-hidden":"true",class:z(o.refresh?"refresh refresh-icon ":"refresh-icon"),onClick:m[0]||(m[0]=(...c)=>o.clickRefresh&&o.clickRefresh(...c))},mn,2))]),n("div",fn,[g(b,{loading:o.pools.currentPositionLoading,active:"",paragraph:!1},{default:w(()=>[n("div",vn,[P(i(o.positionInfo.tokenName)+" ",1),(p(),f("svg",{class:"icon","aria-hidden":"true",onClick:m[1]||(m[1]=c=>o.index.copy(o.positionInfo.nftHash))},In)),o.index&&o.index.chainName==="Aptos"?(p(),f("a",{key:0,href:`${o.config.explorerUrl}/token/${o.positionInfo.nftHash}/0?network=${o.config.network}`,target:"_blank"},hn,8,bn)):(p(),f("a",{key:1,href:`${o.config.explorerUrl}/object/${o.positionInfo.nftHash}?network=${o.config.network}`,target:"_blank"},yn,8,_n))]),n("div",$n,[g(k,{class:z(["remove-liquidity action-btn",o.positionInfo.poolInfo.is_pause?"text-default":""]),disabled:o.positionInfo.poolInfo.is_pause,onClick:o.toRemove},{default:w(()=>[Cn,P(" "+i(o.$t("button.remove")),1)]),_:1},8,["class","disabled","onClick"]),g(k,{class:"increase-liquidity action-btn",disabled:o.positionInfo.poolInfo.is_pause,onClick:o.toIncrease},{default:w(()=>[Tn,P(" "+i(o.$t("button.increase")),1)]),_:1},8,["disabled","onClick"])])]),_:1},8,["loading"])])]),n("div",An,[g(j,{"position-info":o.positionInfo},null,8,["position-info"])]),n("div",Rn,[(p(),ro(U,{key:0,"apr-title":o.aprTitle,"apr-rewards-date-list":o.aprRewardsDateList,"apr-rewards-parameter":o.aprRewardsParameter,"name-tab":"position","from-coin":o.fromCoin,"to-coin":o.toCoin,"pool-info":o.positionInfo.poolInfo,"min-price":o.positionInfo.minPrice,"max-price":o.positionInfo.maxPrice,onAprTab:o.aprTab},null,8,["apr-title","apr-rewards-date-list","apr-rewards-parameter","from-coin","to-coin","pool-info","min-price","max-price","onAprTab"]))]),n("div",Sn,[n("div",On,[n("div",Pn,[n("span",null,i(o.$t("newAdd.pendingFees")),1),n("p",null," $"+i(o.pools.currentPositionLoading||o.feeOwed=="--"?"--":Number(o.feeOwed)==0?0:Number(o.feeOwed)<.01?"<0.01":o.addCommom(o.feeOwed,2)),1)]),g(k,{class:"increase-liquidity action-btn",disabled:o.isLoading||!o.wallet.connected||!(Number(o.positionInfo&&o.positionInfo.feeOwedA)||Number(o.positionInfo&&o.positionInfo.feeOwedB))||o.positionInfo.poolInfo.is_pause,onClick:m[2]||(m[2]=c=>o.isShowClaim=!0)},{default:w(()=>[P(i(o.$t("common.claim")),1)]),_:1},8,["disabled"])]),g(b,{loading:o.pools.currentPositionLoading,active:"",paragraph:!1},{default:w(()=>[n("div",Nn,[n("div",null,[n("img",{src:o.fromCoinUrl},null,8,jn),n("p",null,i(o.showNum(o.positionInfo.feeOwedA,o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.decimals)),1),n("span",null,i(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol),1)]),n("div",null,[n("img",{src:o.toCoinUrl},null,8,Un),n("p",null,i(o.showNum(o.positionInfo.feeOwedB,o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.decimals)),1),n("span",null,i(o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol),1)])])]),_:1},8,["loading"])]),o.positionInfo&&o.positionInfo.poolInfo&&o.positionInfo.poolInfo.rewarder_infos&&o.positionInfo.poolInfo.rewarder_infos.length>0&&o.positionInfo.poolInfo.is_display_rewarder&&o.pendingRewarderArr&&o.pendingRewarderArr.length>0?(p(),f("div",Ln,[n("div",Bn,[n("div",En,[n("span",null,i(o.$t("newAdd.pendingRewards")),1),n("p",null," $"+i(o.pendingRewarder=="--"?"--":Number(o.pendingRewarder)==0?0:Number(o.pendingRewarder)<.01?"<0.01":o.addCommom(o.pendingRewarder,2)),1)]),g(k,{class:"increase-liquidity action-btn",disabled:o.rewarderLoading||!o.wallet.connected||o.pendingRewarder<=0||o.positionInfo.poolInfo.is_pause,loading:o.rewarderLoading,onClick:o.toClaimRewards},{default:w(()=>[P(i(o.$t("common.claim")),1)]),_:1},8,["disabled","loading","onClick"])]),g(b,{loading:o.pools.currentPositionLoading,active:"",paragraph:!1},{default:w(()=>[n("div",Dn,[(p(!0),f(ce,null,pe(o.pendingRewarderArr,c=>(p(),f("div",{key:c,class:z(Number(c==null?void 0:c.amount)==0?"reward-none":"")},[n("img",{src:c.logoURI,alt:""},null,8,qn),n("p",null,i(Number(c.amount)),1),n("span",null,i(c.symbol),1)],2))),128))])]),_:1},8,["loading"])])):D("",!0),o.poolInfo?(p(),f("div",Fn,[n("div",Wn,i(o.$t("newAdd.poolInfo")),1),n("div",Hn,[g(b,{loading:o.pools.currentPositionLoading,active:"",paragraph:!1},{default:w(()=>{var c,T,a,F,e,v;return[o.direct?(p(),f("div",Mn,[n("span",null,i(o.$t("common.currentPrice")),1),P(" "+i(o.addCommom(o.decimalFormat(o.positionInfo.currentPrice,6),6))+" "+i((c=o.toCoin)==null?void 0:c.symbol)+" per "+i((T=o.fromCoin)==null?void 0:T.symbol),1)])):(p(),f("div",zn,[n("span",null,i(o.$t("common.currentPrice")),1),P(" "+i(o.addCommom(o.decimalFormat(1/o.positionInfo.currentPrice,6),6))+" "+i((a=o.fromCoin)==null?void 0:a.symbol)+" per "+i((F=o.toCoin)==null?void 0:F.symbol),1)])),n("div",Gn,[n("div",{class:z(o.direct?"item active-item":"item"),onClick:m[3]||(m[3]=G=>o.direct=!0)},[n("img",{src:o.fromCoinUrl,alt:""},null,8,Kn),P(" "+i(o.positionInfo&&o.positionInfo.token_a&&((e=o.positionInfo.token_a)==null?void 0:e.symbol)),1)],2),n("div",{class:z(o.direct?"item ":"item active-item"),onClick:m[4]||(m[4]=G=>o.direct=!1)},[n("img",{src:o.toCoinUrl,alt:""},null,8,Qn),P(" "+i(o.positionInfo&&o.positionInfo.token_b&&((v=o.positionInfo.token_b)==null?void 0:v.symbol)),1)],2)])]}),_:1},8,["loading"])]),g(b,{loading:o.pools.currentPositionLoading,active:"",paragraph:!1},{default:w(()=>[o.aprTotal&&o.liquidityTvl&&o.vol24?(p(),f("div",Xn,[n("div",Yn,[n("div",Zn,[n("div",Jn,i(o.$t("common.apr")),1),n("div",Vn,[P(i(o.aprTotal?o.addCommom(o.aprTotal.substring(0,o.aprTotal.length-1),2):0)+"% ",1),n("div",xn,[g(X,{class:z(o.isShow?"showHover apr-hover-con":"noHover apr-hover-con"),"l-item":{apr:o.apr,rewarder_apr:o.rewardAprList,aprTotal:o.aprTotal,is_display_rewarder:o.positionInfo.poolInfo.is_display_rewarder},"rewarder-info":o.rewarderArr},null,8,["class","l-item","rewarder-info"])])])]),n("div",os,[n("div",es,i(o.$t("common.liquidity")),1),n("div",ns,"$"+i(o.addCommom(o.liquidityTvl,2)),1)]),n("div",ss,[n("div",is,i(o.$t("common.volume24h")),1),n("div",as,"$"+i(o.addCommom(o.vol24,2)),1)]),n("div",ts,[n("div",ls,i(o.$t("newAdd.tickSpacing")),1),n("div",rs,i(o.positionInfo.tickSpacing),1)])])])):D("",!0)]),_:1},8,["loading"])])):D("",!0),o.isShowClaim?(p(),ro(S,{key:2,"is-loading":o.isLoading,"position-info":o.positionInfo,onOnClose:m[5]||(m[5]=c=>o.isShowClaim=!1),onToClaim:o.toClaim},null,8,["is-loading","position-info","onToClaim"])):D("",!0),de(n("div",ds,[g(C)],512),[[ue,o.pools.currentPositionLoading]])])):D("",!0)}const hs=vo(rn,[["render",us],["__scopeId","data-v-254de755"]]);export{hs as default};
