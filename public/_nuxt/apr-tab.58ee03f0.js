import{a as ge,u as be,f as te,h as k,b as me,c as oe,s as he}from"./pool.0a9aff1a.js";import{a as Pe,r as m,f as x,b as ve,w as V,U as _e,G as ye,h as we,o as d,i as l,j as s,l as h,s as F,v as ee,x as w,C as re,t as n,k as q,F as ae,D as se,u as f,z as ne,A as de,y as fe,p as Le,m as je}from"./entry.cb6f389e.js";/* empty css              */import"./index.36e591b5.js";const Oe=Pe({props:{aprRewardsDateList:{type:Array,default:()=>[]},aprRewardsParameter:{type:Number,default:30},aprTitle:{type:String,default:""},nameTab:{type:String,default:""},poolInfo:{type:Object,default:()=>({})},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""}},setup(e,ie){ye();const S=m(0),E=m(0),B=m(0),H=m(0),b=m(1e4),M=m("echartsBox"+Date.now()+Math.random()),Y=ge(),u=x(()=>Y),G=x(()=>u.value.chainName?me(u.value.chainName):{}),v=m(!1),g=m({});ve(()=>{document.body.clientWidth<750?v.value=!1:v.value=!0,window.onresize=()=>{document.body.clientWidth<750?v.value=!1:v.value=!0,setTimeout(()=>{R()},500)}}),console.log(e,"props===>"),V(()=>g.value,(r,i)=>{oe(r)||(S.value=r==null?void 0:r.aprFee,E.value=r!=null&&r.rewardAprList[0].rewarder_display?r==null?void 0:r.rewardAprList[0].rewarder_apr:0,B.value=r!=null&&r.rewardAprList[1].rewarder_display?r==null?void 0:r.rewardAprList[1].rewarder_apr:0,H.value=r!=null&&r.rewardAprList[2].rewarder_display?r==null?void 0:r.rewardAprList[2].rewarder_apr:0,(r==null?void 0:r.aprPercentageTotal)==0||isNaN(r==null?void 0:r.aprPercentageTotal)||(r==null?void 0:r.aprPercentageTotal)==1/0?b.value=1e9:b.value=0,!r.is_display_rewarder&&S.value==0&&(b.value=1e9),r.is_display_rewarder||(E.value=0,B.value=0,H.value=0),setTimeout(()=>{R()},500))},{immediate:!0,deep:!0});const R=()=>{const r=document.getElementById(M.value),i=_e(r);let c={tooltip:{show:!0,trigger:"axis",axisPointer:{type:"shadow",axis:"auto",snap:!0},renderMode:"html",backgroundColor:"rgba(50,50,50,0.7)",borderColor:"#333",borderWidth:0,padding:5,textStyle:{color:"#fff",fontStyle:"normal",fontWeight:"normal",fontFamily:"sans-serif",fontSize:14},extraCssText:"box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);",confine:!1,formatter:function(o){return o[0].name+"的分数是:"+o[0].data}},title:{text:"",left:"center",top:"center"},series:[{type:"pie",silent:!0,data:[{value:S.value,name:"A"},{value:E.value,name:"B"},{value:B.value,name:"C"},{value:H.value,name:"D"},{value:b.value,name:"E"}],labelLine:{show:!1},itemStyle:{normal:{color:function(o){var p=u.value.theme=="default"?["#9EFFC3","#65C8FF","#6C65FF","#D3E97C","#8D8D8D"]:["#91E1FF","#65C8FF","#6C65FF","#D3E97C","#8D8D8D"];return p[o.dataIndex]}}},radius:["74%","100%"]}]};c&&i.setOption(c,!0)},J=x(()=>{var i;let r=0;return g.value&&g.value.rewardAprList&&((i=g.value)==null?void 0:i.rewardAprList).forEach(o=>{o!=null&&o.rewarder_display&&r++}),r}),K=be(),L=x(()=>K),W=async r=>{let i;r.token_a.address.toLowerCase()===e.fromCoin.address.toLowerCase()&&r.token_b.address.toLowerCase()===e.toCoin.address.toLowerCase()?i=!0:i=!1;const c=i?Number(e.minPrice):e.maxPrice=="∞"?1/2**50:1/Number(e.maxPrice),o=isNaN(Number(e.maxPrice))||e.maxPrice=="∞"?2**50:i?Number(e.maxPrice):1/Number(e.minPrice);let p=[];p=Object.fromEntries(u.value&&u.value&&u.value.addressHistTokens[r.poolAddress].data.map(T=>[T.key,T.value])),console.log(e.aprRewardsParameter,"=====>>>>>>>>>>aprRewardsParameteraprRewardsParameteraprRewardsParameter");const z=Number(Number(e.aprRewardsParameter==7?p.before_7_d_contract_price_lowest:e.aprRewardsParameter==24?p.before_24_h_contract_price_lowest:p.before_30_d_contract_price_lowest)),$=Number(Number(e.aprRewardsParameter==7?p.before_7_d_contract_price_highest:e.aprRewardsParameter==24?p.before_24_h_contract_price_highest:p.before_30_d_contract_price_highest)),D=L.value.newTokenObj;console.log(c,"========>lowerUserPrice"),console.log(o,"========>upperUserPrice"),console.log(z,"========>lowerHistPrice"),console.log($,"========>upperHistPrice");const U=await G.value.getEstPositionAPRWithMulti(c,o,z,$);console.log(U.toString(),"=======>>>>mutil======>>>>参数查看");const O=Number(U.toString()),t=u.value.newTopPoolsObj[r.poolAddress];let N;if(t){e.aprRewardsParameter==7?N=t.apr_7day?Number(t.apr_7day.substring(0,t.apr_7day.length-1)):0:e.aprRewardsParameter==24?N=t.apr_24h?Number(t.apr_24h.substring(0,t.apr_24h.length-1)):0:N=t.apr_30day?Number(t.apr_30day.substring(0,t.apr_30day.length-1)):0;const T=t.rewarder_apr[0]?Number(t.rewarder_apr[0].substring(0,t.rewarder_apr[0].length-1)):0,Z=t.rewarder_apr[1]?Number(t.rewarder_apr[1].substring(0,t.rewarder_apr[1].length-1)):0,I=t.rewarder_apr[2]?Number(t.rewarder_apr[2].substring(0,t.rewarder_apr[2].length-1)):0,_=Number(O*N),C=Number(O*T),A=Number(O*Z),a=Number(O*I),y=_+(r.rewarder_display1?C:0)+(r.rewarder_display2?A:0)+(r.rewarder_display3?a:0);console.log(y,"====>>>>aprPercentageTotal");const le=r.rewarder_infos[0]?D[r.rewarder_infos[0].coinAddress].symbol:"--",ce=r.rewarder_infos[1]?D[r.rewarder_infos[1].coinAddress].symbol:"--",pe=r.rewarder_infos[2]?D[r.rewarder_infos[2].coinAddress].symbol:"--",ue={aprFee:_==1/0||isNaN(_)?0:_,rewardAprList:[{rewarder_name:le,rewarder_apr:C==1/0||isNaN(C)?0:C,styleName:"one",rewarder_display:r.rewarder_display1},{rewarder_name:ce,rewarder_apr:A==1/0||isNaN(A)?0:A,styleName:"two",rewarder_display:r.rewarder_display2},{rewarder_name:pe,rewarder_apr:a==1/0||isNaN(a)?0:a,styleName:"three",rewarder_display:r.rewarder_display2}],aprPercentageTotal:y==1/0||isNaN(y)||y===0?0:y,aprPercentage:te(_/y,2),is_display_rewarder:r.is_display_rewarder};g.value=ue,console.log(g.value,"===>aprPercentageObj.value")}};V(()=>[e.aprRewardsParameter],()=>{e.nameTab=="position"&&W(e.poolInfo)});const j=m("--"),Q=(r,i)=>{r!=="0"&&i!=="∞"?j.value=he(1/(1-Number((r/i)**.25)),2)+"x":j.value=1};V(()=>[e.poolInfo,e.minPrice,e.maxPrice,u.value.addressHistTokens],([r,i,c,o])=>{r&&!oe(r)&&o&&W(r),i&&c&&Q(i,c)},{immediate:!0});const X=(r,i)=>{ie.emit("aprTab",r)};return V(()=>L.value.currentPositionLoading,r=>{L.value.currentPositionLoading&&(g.value={},j.value="--")},{immediate:!0}),{pools:L,initialize:R,aprOne:S,aprTwo:E,aprThree:B,aprFour:H,echartsBox:M,aprPercentageObjList:g,rewardLength:J,fixD:te,addCommom:k,aprTab:X,lever:j,isPc:v}}});const P=e=>(Le("data-v-4543ac0b"),e=e(),je(),e),Ne={key:0,class:"apr-lever"},Te={class:"top"},Ce={key:0,class:"left"},Ae=P(()=>s("span",null,"The concentration degree of your liquidity compared with allocating liquidity to full range like a constant product AMM pool. You would enjoy multiplied capital efficiency but with higher impermanent loss possibility accordingly.",-1)),Fe=P(()=>s("svg",{class:"icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon-information"})],-1)),ke={class:"right"},Re={class:"top"},De={class:"apr-rewards"},Se=P(()=>s("svg",{class:"icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon-information"})],-1)),Ee={class:"apr-tab"},Be=["onClick"],He={class:"tottom"},Me={class:"fees-all"},We={key:0,class:"right-box"},ze=["id"],$e=P(()=>s("div",{class:"ratio-bg"},null,-1)),Ue={class:"progress-fees progress-all"},qe=P(()=>s("div",{class:"light-hint"},null,-1)),Ye={key:1,class:"apr-lever-h5"},Ge={key:0,class:"top"},Je={class:"leverage"},Ke={class:"leverage-title"},Qe=P(()=>s("span",null,"The concentration degree of your liquidity compared with allocating liquidity to full range like a constant product AMM pool. You would enjoy multiplied capital efficiency but with higher impermanent loss possibility accordingly.",-1)),Xe=P(()=>s("svg",{class:"icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon-information"})],-1)),Ze={class:"leverage-text"},Ie={class:"left"},xe=P(()=>s("svg",{class:"icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon-information"})],-1)),Ve={class:"apr-tab"},er=["onClick"],rr={class:"right"},ar={key:0,class:"right-box"},sr=["id"],tr=P(()=>s("div",{class:"ratio-bg"},null,-1)),ir={class:"fees-all"},or={class:"hover-fees-all"};function nr(e,ie,S,E,B,H){var M,Y,u,G,v,g,R,J,K,L,W,j,Q,X,r,i,c,o,p,z,$,D,U,O,t,N,T,Z,I,_,C,A;const b=fe;return e.isPc?(d(),l("div",Ne,[s("div",Te,[e.minPrice!=="0"&&e.maxPrice!=="∞"?(d(),l("div",Ce,[s("div",{class:h(["lever-title apr-title",e.nameTab])},[F(" Leverage "),ee(b,{placement:"bottom","arrow-point-at-center":""},{title:w(()=>[Ae]),default:w(()=>[Fe]),_:1})],2),s("div",{class:"lever-text",style:re({lineHeight:e.aprPercentageObjList&&e.aprPercentageObjList.aprPercentageTotal>0?"52px":""})},n(e.lever),5)])):q("",!0),s("div",ke,[s("div",Re,[s("div",De,[s("div",{class:h(["apr-title",e.nameTab])},[F(n(e.aprTitle)+" ",1),ee(b,{placement:"bottom","arrow-point-at-center":""},{title:w(()=>[s("span",null," Estimated according to trading activity and farming bonus in the past "+n(e.aprRewardsParameter==7?"7 days":e.aprRewardsParameter==24?"24 hours":"30 days")+". Historical data is only a reference. By no means can it guarantee future returns. ",1)]),default:w(()=>[Se]),_:1})],2),s("div",Ee,[(d(!0),l(ae,null,se(e.aprRewardsDateList,a=>(d(),l("div",{key:a,class:h(["apr-item",{"apr-item-active":a.num===e.aprRewardsParameter}]),onClick:y=>e.aprTab(a)},n(a.time),11,Be))),128))])])]),s("div",He,[s("div",{class:"lever-and-apr",style:re({justifyContent:e.minPrice!=="0"&&e.maxPrice!=="∞"?"flex-start":"center"})},[s("div",{class:h(["trade-fees",e.rewardLength>0&&e.aprPercentageObjList.is_display_rewarder?"rewarded":""])},[s("div",Me,[s("span",null,n(e.pools.currentPositionLoading?"--":e.aprPercentageObjList.is_display_rewarder?(M=e.aprPercentageObjList)!=null&&M.aprPercentageTotal?((Y=e.aprPercentageObjList)==null?void 0:Y.aprPercentageTotal)>1e4?">10,000":((u=e.aprPercentageObjList)==null?void 0:u.aprPercentageTotal)<.01?"<0.01":("fixD"in e?e.fixD:f(te))((G=e.aprPercentageObjList)==null?void 0:G.aprPercentageTotal,2):(v=e.aprPercentageObjList)!=null&&v.rewardAprList?"0":"--":(g=e.aprPercentageObjList)!=null&&g.aprFee?((R=e.aprPercentageObjList)==null?void 0:R.aprFee)>1e4?">10,000":((J=e.aprPercentageObjList)==null?void 0:J.aprFee)<.01?"<0.01":("addCommom"in e?e.addCommom:f(k))((K=e.aprPercentageObjList)==null?void 0:K.aprFee,2):(L=e.aprPercentageObjList)!=null&&L.rewardAprList?"0":"--")+"% ",1),e.aprPercentageObjList&&e.aprPercentageObjList.aprPercentageTotal>0?(d(),l("div",We,[s("div",{id:e.echartsBox,class:"right"},null,8,ze),$e])):q("",!0)]),e.aprPercentageObjList&&e.aprPercentageObjList.aprPercentageTotal>0?(d(),l("div",{key:0,class:h(["percentage-fee",e.nameTab])},[s("div",{class:"progress-all-in",style:re({height:e.aprPercentageObjList&&e.aprPercentageObjList.aprPercentageTotal>0?"50px":"25px"})},[s("div",Ue,[qe,F(" Fees  "+n(e.pools.currentPositionLoading?"--":(W=e.aprPercentageObjList)!=null&&W.aprFee?((j=e.aprPercentageObjList)==null?void 0:j.aprFee)>1e4?">10,000":((Q=e.aprPercentageObjList)==null?void 0:Q.aprFee)<.01?"<0.01":("addCommom"in e?e.addCommom:f(k))((X=e.aprPercentageObjList)==null?void 0:X.aprFee,2):(r=e.aprPercentageObjList)!=null&&r.rewardAprList?"0":"--")+"% ",1)]),(d(!0),l(ae,null,se((i=e.aprPercentageObjList)==null?void 0:i.rewardAprList,a=>ne((d(),l("div",{key:a,class:"progress-rewards progress-all"},[s("div",{class:h(["light-hint",a==null?void 0:a.styleName])},null,2),F(" "+n(a==null?void 0:a.rewarder_name)+" Bonus  "+n(a!=null&&a.rewarder_apr?(a==null?void 0:a.rewarder_apr)>1e4?">10,000":(a==null?void 0:a.rewarder_apr)<.01?"<0.01":("addCommom"in e?e.addCommom:f(k))(a==null?void 0:a.rewarder_apr,2):"0")+"% ",1)])),[[de,(a==null?void 0:a.rewarder_name)!="--"&&a.rewarder_display&&e.aprPercentageObjList.is_display_rewarder&&!e.pools.currentPositionLoading]])),128))],4)],2)):q("",!0)],2)],4)])])])])):(d(),l("div",Ye,[e.minPrice!=="0"&&e.maxPrice!=="∞"?(d(),l("div",Ge,[s("div",Je,[s("div",Ke,[F(" Leverage "),ee(b,{placement:"bottom","arrow-point-at-center":""},{title:w(()=>[Qe]),default:w(()=>[Xe]),_:1})]),s("div",Ze,n(e.lever),1)])])):q("",!0),s("div",{class:"bottom",style:re(e.minPrice!=="0"&&e.maxPrice!=="∞"?{}:{border:"none"})},[s("div",Ie,[s("div",{class:h(["apr-title",e.nameTab])},[F(n(e.aprTitle)+" ",1),ee(b,{placement:"bottom","arrow-point-at-center":""},{title:w(()=>[s("span",null," Estimated according to trading activity and farming bonus in the past "+n(e.aprRewardsParameter==7?"7 days":e.aprRewardsParameter==24?"24 hours":"30 days")+". Historical data is only a reference. By no means can it guarantee future returns. ",1)]),default:w(()=>[xe]),_:1})],2),s("div",Ve,[(d(!0),l(ae,null,se(e.aprRewardsDateList,a=>(d(),l("div",{key:a,class:h(["apr-item",{"apr-item-active":a.num===e.aprRewardsParameter}]),onClick:y=>e.aprTab(a)},n(a.time),11,er))),128))])]),s("div",rr,[e.aprPercentageObjList&&e.aprPercentageObjList.aprPercentageTotal>0?(d(),l("div",ar,[s("div",{id:e.echartsBox,class:"right"},null,8,sr),tr])):q("",!0),s("div",{class:h(["trade-fees",e.rewardLength>0&&e.aprPercentageObjList.is_display_rewarder?"rewarded":""])},[s("div",ir,[s("span",null,n(e.pools.currentPositionLoading?"--":e.aprPercentageObjList.is_display_rewarder?(c=e.aprPercentageObjList)!=null&&c.aprPercentageTotal?((o=e.aprPercentageObjList)==null?void 0:o.aprPercentageTotal)>1e4?">10,000":((p=e.aprPercentageObjList)==null?void 0:p.aprPercentageTotal)<.01?"<0.01":("fixD"in e?e.fixD:f(te))((z=e.aprPercentageObjList)==null?void 0:z.aprPercentageTotal,2):($=e.aprPercentageObjList)!=null&&$.rewardAprList?"0":"--":(D=e.aprPercentageObjList)!=null&&D.aprFee?((U=e.aprPercentageObjList)==null?void 0:U.aprFee)>1e4?">10,000":((O=e.aprPercentageObjList)==null?void 0:O.aprFee)<.01?"<0.01":("addCommom"in e?e.addCommom:f(k))((t=e.aprPercentageObjList)==null?void 0:t.aprFee,2):(N=e.aprPercentageObjList)!=null&&N.rewardAprList?"0":"--")+"% ",1),s("div",or,[F(" Fees  :  "),s("span",null,n(e.pools.currentPositionLoading?"--":(T=e.aprPercentageObjList)!=null&&T.aprFee?((Z=e.aprPercentageObjList)==null?void 0:Z.aprFee)>1e4?">10,000":((I=e.aprPercentageObjList)==null?void 0:I.aprFee)<.01?"<0.01":("addCommom"in e?e.addCommom:f(k))((_=e.aprPercentageObjList)==null?void 0:_.aprFee,2):(C=e.aprPercentageObjList)!=null&&C.rewardAprList?"0":"--")+"% ",1),(d(!0),l(ae,null,se((A=e.aprPercentageObjList)==null?void 0:A.rewardAprList,a=>ne((d(),l("div",{key:a},n(a==null?void 0:a.rewarder_name)+" Bonus  :  "+n(a!=null&&a.rewarder_apr?(a==null?void 0:a.rewarder_apr)>1e4?">10,000":(a==null?void 0:a.rewarder_apr)<.01?"<0.01":("addCommom"in e?e.addCommom:f(k))(a==null?void 0:a.rewarder_apr,2):"0")+"% ",1)),[[de,(a==null?void 0:a.rewarder_name)!="--"&&a.rewarder_display&&e.aprPercentageObjList.is_display_rewarder&&!e.pools.currentPositionLoading]])),128))])])],2)])],4)]))}const ur=we(Oe,[["render",nr],["__scopeId","data-v-4543ac0b"]]);export{ur as _};
