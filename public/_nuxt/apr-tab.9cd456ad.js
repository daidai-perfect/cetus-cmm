import{a as te,W as se,r as l,e as ie,i as M,f as oe,w as $,ab as de,b as ne,z as G,Q as ce,A as pe,j as Q,k as ue,o as N,l as O,m as o,q as C,C as z,t as _,E as le,F as J,G as K,T as X,N as _e,O as ge,H as me,s as be,v as Pe}from"./entry.cade3582.js";import"./index.2be44ae6.js";const we=te({props:{aprRewardsDateList:{type:Array,default:()=>[]},aprRewardsParameter:{type:Number,default:30},aprTitle:{type:String,default:""},nameTab:{type:String,default:""},poolInfo:{type:Object,default:()=>({})},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""}},setup(r,q){se();const P=l(0),w=l(0),y=l(0),f=l(0),g=l(1e4),v=l("echartsBox"+Date.now()+Math.random()),T=ie(),n=M(()=>T),j=M(()=>n.value.chainName?pe(n.value.chainName):{}),c=l({});oe(()=>{window.setTimeout(()=>{m()},1e3)}),$(()=>c.value,(e,i)=>{Q(e)||(P.value=e==null?void 0:e.aprFee,w.value=e!=null&&e.rewardAprList[0].rewarder_display?e==null?void 0:e.rewardAprList[0].rewarder_apr:0,y.value=e!=null&&e.rewardAprList[1].rewarder_display?e==null?void 0:e.rewardAprList[1].rewarder_apr:0,f.value=e!=null&&e.rewardAprList[2].rewarder_display?e==null?void 0:e.rewardAprList[2].rewarder_apr:0,(e==null?void 0:e.aprPercentageTotal)==0||isNaN(e==null?void 0:e.aprPercentageTotal)||(e==null?void 0:e.aprPercentageTotal)==1/0?g.value=1e9:g.value=0,!e.is_display_rewarder&&P.value==0&&(g.value=1e9),e.is_display_rewarder||(w.value=0,y.value=0,f.value=0),m())},{immediate:!0});const m=()=>{const e=document.getElementById(v.value),i=de(e);let p={tooltip:{show:!0,trigger:"axis",axisPointer:{type:"shadow",axis:"auto",snap:!0},renderMode:"html",backgroundColor:"rgba(50,50,50,0.7)",borderColor:"#333",borderWidth:0,padding:5,textStyle:{color:"#fff",fontStyle:"normal",fontWeight:"normal",fontFamily:"sans-serif",fontSize:14},extraCssText:"box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);",confine:!1,formatter:function(s){return s[0].name+"\u7684\u5206\u6570\u662F:"+s[0].data}},title:{text:"",left:"center",top:"center"},series:[{type:"pie",silent:!0,data:[{value:P.value,name:"A"},{value:w.value,name:"B"},{value:y.value,name:"C"},{value:f.value,name:"D"},{value:g.value,name:"E"}],labelLine:{show:!1},itemStyle:{normal:{color:function(s){var d=n.value.theme=="default"?["#9EFFC3","#65C8FF","#6C65FF","#D3E97C","#8D8D8D"]:["#91E1FF","#65C8FF","#6C65FF","#D3E97C","#8D8D8D"];return d[s.dataIndex]}}},radius:["74%","100%"]}]};p&&i.setOption(p,!0)},F=M(()=>{var i;let e=0;return c.value&&c.value.rewardAprList&&((i=c.value)==null?void 0:i.rewardAprList).forEach(s=>{s!=null&&s.rewarder_display&&e++}),e}),A=ne(),u=M(()=>A),h=async e=>{let i;e.token_a.address.toLowerCase()===r.fromCoin.address.toLowerCase()&&e.token_b.address.toLowerCase()===r.toCoin.address.toLowerCase()?i=!0:i=!1;const p=i?Number(r.minPrice):r.maxPrice=="\u221E"?1/2**50:1/Number(r.maxPrice),s=isNaN(Number(r.maxPrice))||r.maxPrice=="\u221E"?2**50:i?Number(r.maxPrice):1/Number(r.minPrice);let d=[];d=Object.fromEntries(n.value&&n.value&&n.value.addressHistTokens[e.poolAddress].data.map(D=>[D.key,D.value])),console.log(r.aprRewardsParameter,"=====>>>>>>>>>>aprRewardsParameteraprRewardsParameteraprRewardsParameter");const a=Number(Number(r.aprRewardsParameter==7?d.before_7_d_contract_price_lowest:r.aprRewardsParameter==24?d.before_24_h_contract_price_lowest:d.before_30_d_contract_price_lowest)),U=Number(Number(r.aprRewardsParameter==7?d.before_7_d_contract_price_highest:r.aprRewardsParameter==24?d.before_24_h_contract_price_highest:d.before_30_d_contract_price_highest)),W=u.value.newTokenObj;console.log(p,"========>lowerUserPrice"),console.log(s,"========>upperUserPrice"),console.log(a,"========>lowerHistPrice"),console.log(U,"========>upperHistPrice");const x=await j.value.getEstPositionAPRWithMulti(p,s,a,U);console.log(x.toString(),"=======>>>>mutil======>>>>\u53C2\u6570\u67E5\u770B");const S=Number(x.toString()),t=n.value.newTopPoolsObj[e.poolAddress];let k;if(t){r.aprRewardsParameter==7?k=t.apr_7day?Number(t.apr_7day.substring(0,t.apr_7day.length-1)):0:r.aprRewardsParameter==24?k=t.apr_24h?Number(t.apr_24h.substring(0,t.apr_24h.length-1)):0:k=t.apr_30day?Number(t.apr_30day.substring(0,t.apr_30day.length-1)):0;const D=t.rewarder_apr[0]?Number(t.rewarder_apr[0].substring(0,t.rewarder_apr[0].length-1)):0,Z=t.rewarder_apr[1]?Number(t.rewarder_apr[1].substring(0,t.rewarder_apr[1].length-1)):0,I=t.rewarder_apr[2]?Number(t.rewarder_apr[2].substring(0,t.rewarder_apr[2].length-1)):0,L=Number(S*k),E=Number(S*D),B=Number(S*Z),H=Number(S*I),b=L+(e.rewarder_display1?E:0)+(e.rewarder_display2?B:0)+(e.rewarder_display3?H:0);console.log(b,"====>>>>aprPercentageTotal");const V=e.rewarder_infos[0]?W[e.rewarder_infos[0].coinAddress].symbol:"--",ee=e.rewarder_infos[1]?W[e.rewarder_infos[1].coinAddress].symbol:"--",re=e.rewarder_infos[2]?W[e.rewarder_infos[2].coinAddress].symbol:"--",ae={aprFee:L==1/0||isNaN(L)?0:L,rewardAprList:[{rewarder_name:V,rewarder_apr:E==1/0||isNaN(E)?0:E,styleName:"one",rewarder_display:e.rewarder_display1},{rewarder_name:ee,rewarder_apr:B==1/0||isNaN(B)?0:B,styleName:"two",rewarder_display:e.rewarder_display2},{rewarder_name:re,rewarder_apr:H==1/0||isNaN(H)?0:H,styleName:"three",rewarder_display:e.rewarder_display2}],aprPercentageTotal:b==1/0||isNaN(b)||b===0?0:b,aprPercentage:G(L/b,2),is_display_rewarder:e.is_display_rewarder};c.value=ae}};$(()=>[r.aprRewardsParameter],()=>{r.nameTab=="position"&&h(r.poolInfo)}),$(()=>[r.poolInfo,r.minPrice,r.maxPrice,n.value.addressHistTokens],([e,i,p,s])=>{e&&!Q(e)&&s&&h(e)},{immediate:!0});const R=(e,i)=>{q.emit("aprTab",e)};return $(()=>u.value.currentPositionLoading,e=>{u.value.currentPositionLoading&&(c.value={})}),{pools:u,initialize:m,aprOne:P,aprTwo:w,aprThree:y,aprFour:f,echartsBox:v,aprPercentageObjList:c,rewardLength:F,fixD:G,addCommom:ce,aprTab:R}}});const Y=r=>(be("data-v-8860f9c5"),r=r(),Pe(),r),ye={class:"apr-rewards"},fe=Y(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-information"})],-1)),ve={class:"apr-tab"},he=["onClick"],Le={class:"fees-all"},Ne=["id"],Oe={class:"progress-all-in"},Ce={class:"progress-fees progress-all"},Te=Y(()=>o("div",{class:"light-hint"},null,-1));function je(r,q,P,w,y,f){var v,T,n,j,c,m,F,A,u,h,R,e,i,p,s,d;const g=me;return N(),O("div",null,[o("div",ye,[o("div",{class:C(["apr-title",r.nameTab])},[z(_(r.aprTitle)+" ",1),le(g,{placement:"bottom","arrow-point-at-center":""},{title:J(()=>[o("span",null," Estimated according to trading activity and farming bonus in the past "+_(r.aprRewardsParameter==7?"7 days":r.aprRewardsParameter==24?"24 hours":"30 days")+". Historical data is only a reference. By no means can it guarantee future returns. ",1)]),default:J(()=>[fe]),_:1})],2),o("div",ve,[(N(!0),O(K,null,X(r.aprRewardsDateList,a=>(N(),O("div",{key:a,class:C(["apr-item",{"apr-item-active":a.num===r.aprRewardsParameter}]),onClick:U=>r.aprTab(a)},_(a.time),11,he))),128))])]),o("div",{class:C(["trade-fees",r.rewardLength>0&&r.aprPercentageObjList.is_display_rewarder?"rewarded":""])},[o("div",Le,[o("span",null,[z(_(r.pools.currentPositionLoading?"--":r.aprPercentageObjList.is_display_rewarder?(v=r.aprPercentageObjList)!=null&&v.aprPercentageTotal?((T=r.aprPercentageObjList)==null?void 0:T.aprPercentageTotal)>1e4?">10,000":((n=r.aprPercentageObjList)==null?void 0:n.aprPercentageTotal)<.01?"<0.01":r.fixD((j=r.aprPercentageObjList)==null?void 0:j.aprPercentageTotal,2):(c=r.aprPercentageObjList)!=null&&c.rewardAprList?"0":"--":(m=r.aprPercentageObjList)!=null&&m.aprFee?((F=r.aprPercentageObjList)==null?void 0:F.aprFee)>1e4?">10,000":((A=r.aprPercentageObjList)==null?void 0:A.aprFee)<.01?"<0.01":r.addCommom((u=r.aprPercentageObjList)==null?void 0:u.aprFee,2):(h=r.aprPercentageObjList)!=null&&h.rewardAprList?"0":"--")+"% ",1),o("div",{id:r.echartsBox,class:"right"},null,8,Ne)])]),o("div",{class:C(["percentage-fee",r.nameTab])},[o("div",Oe,[o("div",Ce,[Te,z(" Fees\xA0\xA0"+_(r.pools.currentPositionLoading?"--":(R=r.aprPercentageObjList)!=null&&R.aprFee?((e=r.aprPercentageObjList)==null?void 0:e.aprFee)>1e4?">10,000":((i=r.aprPercentageObjList)==null?void 0:i.aprFee)<.01?"<0.01":r.addCommom((p=r.aprPercentageObjList)==null?void 0:p.aprFee,2):(s=r.aprPercentageObjList)!=null&&s.rewardAprList?"0":"--")+"% ",1)]),(N(!0),O(K,null,X((d=r.aprPercentageObjList)==null?void 0:d.rewardAprList,a=>_e((N(),O("div",{key:a,class:"progress-rewards progress-all"},[o("div",{class:C(["light-hint",a==null?void 0:a.styleName])},null,2),z(" "+_(a==null?void 0:a.rewarder_name)+" Bonus\xA0\xA0"+_(a!=null&&a.rewarder_apr?(a==null?void 0:a.rewarder_apr)>1e4?">10,000":(a==null?void 0:a.rewarder_apr)<.01?"<0.01":r.addCommom(a==null?void 0:a.rewarder_apr,2):"0")+"% ",1)])),[[ge,(a==null?void 0:a.rewarder_name)!="--"&&a.rewarder_display&&r.aprPercentageObjList.is_display_rewarder&&!r.pools.currentPositionLoading]])),128))])],2)],2)])}const Re=ue(we,[["render",je],["__scopeId","data-v-8860f9c5"]]);export{Re as _};
