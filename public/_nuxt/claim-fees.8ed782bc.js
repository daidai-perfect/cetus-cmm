import{_ as uo}from"./token-warning.99fd2756.js";import{_ as mo}from"./status-block.762b56c9.js";import{a as V,u as eo,l as D,g as po,h as v,e as R,c as no}from"./pool.b9076f31.js";import{a as H,l as so,r as q,m as g,e as J,o as l,f as r,h as e,i as I,w as $,t as i,s as y,x as F,u as m,j as L,S as co,p as z,k as K,A as M,b as fo,c as io,Q as Io,B as to,M as ko,K as ho}from"./entry.e9343920.js";/* empty css              */import{i as P}from"./import-icon.de3e6c66.js";import{_ as ao}from"./icon-arrow_2x.948aedb2.js";import{_ as lo}from"./icon-arrow_2x.4ffddb8e.js";import{_ as ro}from"./c-switch.1b268ab0.js";import{u as bo}from"./notifi.5aee2e7e.js";const go=H({props:{positionInfo:{type:Object,required:!0,default:()=>({})}},setup(o){const{t:p}=so();let _=q(!1),w=q(!0);const k=V(),C=eo(),n=g(()=>C);console.log(o.positionInfo,"===>props.positionInfo");const d=g(()=>{var t,u,h,b,O,j,N,B;if(no(o.positionInfo))return" --";{const T=o.positionInfo.amountA*((u=n.value.RATES[(t=o.positionInfo)==null?void 0:t.token_a.address])==null?void 0:u.price),E=o.positionInfo.amountB*((b=n.value.RATES[(h=o.positionInfo)==null?void 0:h.token_b.address])==null?void 0:b.price);return(j=n.value.RATES[(O=o.positionInfo)==null?void 0:O.token_a.address])!=null&&j.price&&((B=n.value.RATES[(N=o.positionInfo)==null?void 0:N.token_b.address])!=null&&B.price)?T+E:" --"}}),S=g(()=>{var t,u,h,b;return(u=n.value.RATES[(t=o.positionInfo)==null?void 0:t.token_a.name.toUpperCase()])!=null&&u.price&&d.value!=="--"?(o.positionInfo.amountA*((b=n.value.RATES[(h=o.positionInfo)==null?void 0:h.token_a.name.toUpperCase()])==null?void 0:b.price)/d.value*100).toFixed(0):" --"}),c=g(()=>{var t,u,h,b;return(u=n.value.RATES[(t=o.positionInfo)==null?void 0:t.token_b.name.toUpperCase()])!=null&&u.price&&d.value!=="--"?(o.positionInfo.amountB*((b=n.value.RATES[(h=o.positionInfo)==null?void 0:h.token_b.name.toUpperCase()])==null?void 0:b.price)/d.value*100).toFixed(0):" --"}),s=g(()=>n.value.allTokenObj&&o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.address&&n.value.allTokenObj[o.positionInfo.token_a.address]&&n.value.allTokenObj[o.positionInfo.token_a.address].logoURI),a=g(()=>n.value.allTokenObj&&o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.address&&n.value.allTokenObj[o.positionInfo.token_b.address]&&n.value.allTokenObj[o.positionInfo.token_b.address].logoURI),f=g(()=>{var t,u;return(u=(t=o.positionInfo)==null?void 0:t.poolInfo)==null?void 0:u.needReverse}),U=t=>{var u;return(t==null?void 0:t.logoURI)||(t==null?void 0:t.logo_url)||((u=n.value.tokensObj[t==null?void 0:t.address])==null?void 0:u.logo_url)||(k.theme==="default"?P("/image/coins/unknown.png"):P("/image/coins/sui-unknown.png"))};return{tokensObj:g(()=>n.value.tokensObj),fromPercent:c,toPercent:S,amountUSD:d,showNum:D,t:p,importIcon:P,indexStore:k,rateChange:w,decimalFormat:po,fromCoinUrl:s,toCoinUrl:a,pools:n,addCommom:v,isPc:_,needReverse:f,getCoinIcon:U,decimalUi:R}}});const vo=o=>(z("data-v-d3219a9d"),o=o(),K(),o),_o={key:0,class:"position-card"},Co={key:0,class:"coin-pair"},So={class:"coin-a"},yo=["src"],wo={class:"coin-b"},$o=["src"],Uo={key:1,class:"coin-pair"},Oo={class:"coin-a"},Ro=["src"],Po={key:0,class:"token-warning"},Ao={class:"coin-b"},jo=["src"],No={key:0,class:"token-warning"},Bo={class:"fee"},To={class:"right"},Eo={key:0,class:"status"},Do={class:"min-and-max"},qo={key:0},Lo={class:"text"},Mo={key:0,src:ao,alt:""},Fo={key:1,src:lo,alt:""},Vo={class:"text"},Ho={key:1},Jo={class:"text"},zo={key:0,src:ao,alt:""},Ko={key:1,src:lo,alt:""},Qo={class:"text"},Wo=vo(()=>e("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),Go=[Wo],Xo={class:"liquidity"},Yo={class:"label"},Zo={class:"value"},xo={class:"item"},oe=["src"],ee={class:"rate"},ne={class:"item"},se=["src"],ie={class:"rate"};function te(o,p,_,w,k,C){const n=uo,d=co,S=mo;return o.positionInfo?(l(),r("div",_o,[e("div",{class:F(["left",`position-status-${o.positionInfo&&o.positionInfo.currentStatus&&o.positionInfo.currentStatus.toLowerCase()}`])},[I(d,{class:"left-skeleton",loading:o.pools.currentPositionLoading,active:"",paragraph:!1},{default:$(()=>{var c,s,a,f;return[o.needReverse?(l(),r("div",Uo,[e("div",null,[e("div",Oo,[e("img",{src:o.toCoinUrl||o.getCoinIcon(o.positionInfo.token_b)},null,8,Ro),o.tokensObj&&o.tokensObj[o.positionInfo.token_b.address]&&o.tokensObj[o.positionInfo.token_b.address].isSelfBuilt?(l(),r("div",Po)):y("",!0)]),e("div",Ao,[e("img",{src:o.fromCoinUrl||o.getCoinIcon(o.positionInfo.token_a)},null,8,jo),o.tokensObj&&o.tokensObj[o.positionInfo.token_a.address]&&o.tokensObj[o.positionInfo.token_a.address].isSelfBuilt?(l(),r("div",No)):y("",!0)])]),e("span",null,i(o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol)+" - "+i(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol),1)])):(l(),r("div",Co,[e("div",null,[e("div",So,[e("img",{src:o.fromCoinUrl||o.getCoinIcon(o.positionInfo.token_a)},null,8,yo),I(n,{address:(s=(c=o.positionInfo)==null?void 0:c.token_a)==null?void 0:s.address,"style-params":{width:"16px",height:"16px",left:"25px",bottom:"10px"}},null,8,["address"])]),e("div",wo,[e("img",{src:o.toCoinUrl||o.getCoinIcon(o.positionInfo.token_b)},null,8,$o),I(n,{address:(f=(a=o.positionInfo)==null?void 0:a.token_b)==null?void 0:f.address,"style-params":{width:"16px",height:"16px",left:"25px",bottom:"10px"}},null,8,["address"])])]),e("span",null,i(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol)+" - "+i(o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol),1)])),e("div",Bo,i(o.$t("common.fee"))+" "+i(o.positionInfo.fee*100)+"%",1)]}),_:1},8,["loading"])],2),e("div",To,[o.pools.currentPositionLoading?y("",!0):(l(),r("div",Eo,[I(S,{"current-status":o.positionInfo.currentStatus||"","block-name":"detail"},null,8,["current-status"])])),I(d,{loading:o.pools.currentPositionLoading,active:"",paragraph:!1},{default:$(()=>[e("div",Do,[(o.needReverse?!o.rateChange:o.rateChange)?(l(),r("div",qo,[e("div",Lo,i(("addCommom"in o?o.addCommom:m(v))(("decimalUi"in o?o.decimalUi:m(R))(String(o.positionInfo.minPrice),6))),1),o.indexStore.theme=="default"?(l(),r("img",Mo)):(l(),r("img",Fo)),e("div",Vo,i(o.positionInfo&&o.positionInfo.maxPrice&&o.positionInfo.maxPrice.indexOf("∞")>-1||o.positionInfo&&o.positionInfo.maxPrice&&o.positionInfo.maxPrice.indexOf("+")>-1?"∞":("addCommom"in o?o.addCommom:m(v))(("decimalUi"in o?o.decimalUi:m(R))(String(o.positionInfo.maxPrice),6)))+" "+i(o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol)+" per "+i(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol),1)])):(l(),r("div",Ho,[e("div",Jo,i(("addCommom"in o?o.addCommom:m(v))(("decimalUi"in o?o.decimalUi:m(R))(String(1/Number(o.positionInfo.maxPrice)),6))),1),o.indexStore.theme=="default"?(l(),r("img",zo)):(l(),r("img",Ko)),e("div",Qo,i(o.positionInfo&&o.positionInfo.maxPrice&&o.positionInfo.maxPrice.indexOf("∞")>-1||o.positionInfo&&o.positionInfo.maxPrice&&o.positionInfo.maxPrice.indexOf("+")>-1?"∞":("addCommom"in o?o.addCommom:m(v))(("decimalUi"in o?o.decimalUi:m(R))(String(1/Number(o.positionInfo.minPrice)),6)))+" "+i(o.positionInfo&&o.positionInfo.token_a&&o.positionInfo.token_a.symbol)+" per "+i(o.positionInfo&&o.positionInfo.token_b&&o.positionInfo.token_b.symbol),1)])),(l(),r("svg",{class:"icon-change","aria-hidden":"true",onClick:p[0]||(p[0]=c=>o.rateChange=!o.rateChange)},Go))])]),_:1},8,["loading"]),e("div",Xo,[I(d,{loading:o.pools.currentPositionLoading,active:"",paragraph:!1},{default:$(()=>[e("div",Yo,i(o.$t("common.liquidity")),1),e("div",Zo," $"+i(o.amountUSD=="--"?"--":Number(o.amountUSD)==0?0:Number(o.amountUSD)<.01?"<0.01":("addCommom"in o?o.addCommom:m(v))(o.amountUSD,2)),1)]),_:1},8,["loading"])]),e("div",{class:F(o.needReverse?"token-num reverse":"token-num")},[I(d,{loading:o.pools.currentPositionLoading,active:"",paragraph:!1},{default:$(()=>{var c,s,a,f,U,A,t,u,h,b,O,j,N,B,T,E,Q,W,G,X,Y,Z,x,oo;return[e("div",xo,[e("div",null,[e("img",{src:o.fromCoinUrl||o.getCoinIcon((c=o.positionInfo)==null?void 0:c.token_a)},null,8,oe),I(n,{address:(a=(s=o.positionInfo)==null?void 0:s.token_a)==null?void 0:a.address,"style-params":{width:"12px",height:"12px",left:"15px",bottom:"0px"}},null,8,["address"]),e("p",null,i(("decimalUi"in o?o.decimalUi:m(R))((f=o.positionInfo)==null?void 0:f.amountA,(A=(U=o.positionInfo)==null?void 0:U.token_a)==null?void 0:A.decimals)),1),e("span",null,i((u=(t=o.positionInfo)==null?void 0:t.token_a)==null?void 0:u.symbol)+" "+i((b=(h=o.positionInfo)==null?void 0:h.token_a)!=null&&b.labels&&((j=(O=o.positionInfo)==null?void 0:O.token_a)!=null&&j.labels[0])?`(${o.positionInfo.token_a.labels[0]})`:""),1)]),e("div",ee,i(("addCommom"in o?o.addCommom:m(v))(o.positionInfo.fromPercent,0))+"% ",1)]),e("div",ne,[e("div",null,[e("img",{src:o.toCoinUrl||o.getCoinIcon((N=o.positionInfo)==null?void 0:N.token_b)},null,8,se),I(n,{address:(T=(B=o.positionInfo)==null?void 0:B.token_b)==null?void 0:T.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"]),L(),e("p",null,i(("decimalUi"in o?o.decimalUi:m(R))((E=o.positionInfo)==null?void 0:E.amountB,(W=(Q=o.positionInfo)==null?void 0:Q.token_b)==null?void 0:W.decimals)),1),e("span",null,i((X=(G=o.positionInfo)==null?void 0:G.token_b)==null?void 0:X.symbol)+" "+i((Z=(Y=o.positionInfo)==null?void 0:Y.token_b)!=null&&Z.labels&&((oo=(x=o.positionInfo)==null?void 0:x.token_b)!=null&&oo.labels[0])?`(${o.positionInfo.token_b.labels[0]})`:""),1)]),e("div",ie,i(("addCommom"in o?o.addCommom:m(v))(o.positionInfo.toPercent,0))+"%",1)])]}),_:1},8,["loading"])],2)])])):y("",!0)}const Be=J(go,[["render",te],["__scopeId","data-v-d3219a9d"]]),ae=H({components:{CSwitch:ro},props:{positionInfo:{type:Object,default:()=>({})}},setup(o){const p=bo(),_=g(()=>p),w=g(()=>_.value.status),k=V();M(()=>[_.value.targetGroups],s=>{console.log("0327###watch###newTargetGoups###",s)},{immediate:!0});const C=q(!1);M(()=>w.value,s=>{s=="authenticated",C.value=!1},{immediate:!0});const n=q(!1),d=async()=>{n.value=!n.value;const s={pool_address:o.positionInfo.poolAddress,position_index:o.positionInfo.index},a=o.positionInfo.nftHash;await p.subscribePosition(s,a,n.value)},S=s=>{const a=s.sources;n.value=a.some(f=>JSON.parse(f.blockchainAddress).pool_address==o.positionInfo.poolAddress&&Number(JSON.parse(f.blockchainAddress).position_index)==Number(o.positionInfo.index))},c=fo();return console.log(c.currentRoute.value.query.token,"===>rouyter"),M(()=>[_.value.sourceGroups,o.positionInfo],([s,a])=>{var f,U,A;console.log(s,"==>newSourceGroups169"),console.log(a,"===>positionInfo170"),n.value=!1,s&&s.length>0&&s[0]&&a&&!no(a)&&((A=(U=(f=c==null?void 0:c.currentRoute)==null?void 0:f.value)==null?void 0:U.query)==null?void 0:A.token)==(a==null?void 0:a.name)&&(console.log("触发"),console.log(s,"==>newSourceGroups"),console.log(a,"===>positionInfo"),S(s[0]))},{immediate:!0,deep:!0}),{importIcon:P,isShowSetUp:C,changeSwitch:d,checked:n,notifiStatus:w,store:k}}});const le=o=>(z("data-v-cceeb488"),o=o(),K(),o),de={class:"range-alerts"},re={class:"range-alerts-top"},ue={class:"title"},me=le(()=>e("div",{class:"title-all"},[e("span",{class:"Range"},"Range Alerts")],-1)),pe={key:1,class:"h5-switch-box"},ce={class:"range-alerts-bottom"},fe={key:0,class:"pc-switch-box"};function Ie(o,p,_,w,k,C){const n=to,d=ro;return l(),r("div",de,[e("div",re,[e("div",ue,[me,o.isShowSetUp||o.notifiStatus!=="authenticated"?(l(),io(n,{key:0,class:"range-alerts-button",onClick:p[0]||(p[0]=Io(S=>o.store.setIsShowNotifi(!0),["stop"]))},{default:$(()=>[L(" Set up ")]),_:1})):y("",!0),!o.isShowSetUp&&o.notifiStatus=="authenticated"?(l(),r("div",pe,[I(d,{checked:o.checked,disabled:o.notifiStatus!=="authenticated",onChange:o.changeSwitch},null,8,["checked","disabled","onChange"])])):y("",!0)])]),e("div",ce,[L(" Receive alerts via Telegram, SMS, or email when this position goes out of range. "),!o.isShowSetUp&&o.notifiStatus=="authenticated"?(l(),r("div",fe,[I(d,{checked:o.checked,disabled:o.notifiStatus!=="authenticated",onChange:o.changeSwitch},null,8,["checked","disabled","onChange"])])):y("",!0)])])}const Te=J(ae,[["render",Ie],["__scopeId","data-v-cceeb488"]]),ke=H({components:{Modal:ko},props:{positionInfo:{type:Object,required:!0},isLoading:{type:Boolean,required:!0},needReverse:{type:Boolean,required:!1}},setup(o,p){const{t:_,locale:w}=so(),k=V(),{copy:C}=k,n=()=>{p.emit("toClaim")},d=eo(),S=g(()=>d);return{showNum:D,toClaim:n,t:_,addCommom:v,importIcon:P,store:k,copy:C,getCoinIcon:s=>{var a;return(s==null?void 0:s.logoURI)||(s==null?void 0:s.logo_url)||((a=S.value.tokensObj[s==null?void 0:s.address])==null?void 0:a.logo_url)||(k.theme==="default"?P("/image/coins/unknown.png"):P("/image/coins/sui-unknown.png"))}}}});const he=o=>(z("data-v-dca3fbf0"),o=o(),K(),o),be=he(()=>e("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),ge={key:0,class:"pc-claim"},ve=["src"],_e={key:1,class:"pc-claim"},Ce=["src"];function Se(o,p,_,w,k,C){const n=to,d=ho("Modal");return l(),io(d,{visible:!0,class:"claim-fees",centered:"",closable:!0,title:o.$t("modal.claimFees"),width:"400px",footer:null,onCancel:p[0]||(p[0]=S=>o.$emit("onClose"))},{closeIcon:$(()=>[be]),default:$(()=>[e("div",{class:F(o.needReverse?"claim-container reverse":"claim-container")},[o.positionInfo&&o.positionInfo.token_a.symbol?(l(),r("div",ge,[e("img",{src:o.getCoinIcon(o.positionInfo.token_a)},null,8,ve),e("span",null,i(("showNum"in o?o.showNum:m(D))(o.positionInfo.feeOwedA,o.positionInfo.token_a.decimals))+" "+i(o.positionInfo.token_a.symbol),1)])):y("",!0),o.positionInfo&&o.positionInfo.token_b.symbol?(l(),r("div",_e,[e("img",{src:o.getCoinIcon(o.positionInfo.token_b)},null,8,Ce),e("span",null,i(("showNum"in o?o.showNum:m(D))(o.positionInfo.feeOwedB,o.positionInfo.token_b.decimals))+" "+i(o.positionInfo.token_b.symbol),1)])):y("",!0)],2),I(n,{class:"big-btn claim-btn",disabled:o.isLoading||("addCommom"in o?o.addCommom:m(v))(o.positionInfo.feeOwedA,o.positionInfo.token_a.decimals)==0&&("addCommom"in o?o.addCommom:m(v))(o.positionInfo.feeOwedB,o.positionInfo.token_b.decimals)==0||o.positionInfo.poolInfo.is_pause,onClick:o.toClaim},{default:$(()=>[L(i(o.$t("common.claim")),1)]),_:1},8,["disabled","onClick"])]),_:1},8,["title"])}const Ee=J(ke,[["render",Se],["__scopeId","data-v-dca3fbf0"]]);export{Be as _,Te as a,Ee as b};
