import{_ as oe}from"./token-warning.99fd2756.js";import{i as y}from"./import-icon.de3e6c66.js";import{a as K,j as ne,u as se,h as R,D as pe,f as ve,b as be,p as ke}from"./pool.b9076f31.js";import{a as te,l as ae,m as k,a1 as he,a2 as le,A as Z,e as ie,o as t,f as l,h as s,c as O,t as m,x as q,u as g,i as j,w as f,s as N,j as E,I as _e,J as re,a9 as fe,S as ge,B as ye,p as de,k as ue,M as $e,r as M,v as we,aa as Ce,K as H,E as Se,a3 as Ie,F as x,q as ee,D as Le,ab as Te}from"./entry.e9343920.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import{_ as Oe,a as je}from"./img-no-Positions_2x.723586ce.js";const Ne=te({components:{TokenWarning:oe},props:{inputValue:{type:String,default:""},inputDisabled:{type:Boolean,default:!1},coinName:{type:String,default:""},coinSymbol:{type:String,default:""},balance:{type:Number,default:null},coinIcon:{type:String,default:""},havemax:{type:Boolean,default:!0},hasArrow:{type:Boolean,default:!0},isTotal:{type:Boolean,default:!1},importPage:{type:String,default:""},address:{type:String,default:""}},setup(e,r){const{t:a,locale:U}=ae(),V=K(),h=k(()=>V),$=k(()=>new pe(Number(e.balance)).div(2)),p=he(le,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0});function I(){this.$emit("onSelect")}const w=u=>{const b=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${(_==null?void 0:_.value)&&(_==null?void 0:_.value)}})?).*$`);u.target.value=u.target.value.replace(b,"$1")},L=ne(),v=k(()=>L),n=se(),d=k(()=>n);let C={};Z(()=>d.value.RATES,u=>{u&&(console.log(u,"price====>"),C=u)},{immediate:!0});const T=k(()=>(console.log(e.inputValue,"==>props.inputValue"),console.log(e.coinName,"===>props.coinName"),ve(Number(e.inputValue)*Number(C&&C[e.address]&&C[e.address].price),2))),A=k(()=>{var u,b,B;return console.log((u=d.value.tokensObj[e.address])==null?void 0:u.labels,"===> pool.value.tokensObj[props.address]?.labels"),d.value.tokensObj&&e.address&&d.value.tokensObj[e.address]&&((b=d.value.tokensObj[e.address])==null?void 0:b.labels)&&((B=d.value.tokensObj[e.address])==null?void 0:B.labels[0])}),_=k(()=>{var u;return d.value.tokensObj&&e.address&&d.value.tokensObj[e.address]&&((u=d.value.tokensObj[e.address])==null?void 0:u.decimals)}),F=k(()=>{var u,b;return e.coinIcon||((b=(u=d==null?void 0:d.value)==null?void 0:u.tokensObj[e.address])==null?void 0:b.logo_url)||(h.value.theme==="default"?y("/image/coins/unknown.png"):y("/image/coins/sui-unknown.png"))}),W=k(()=>d.value.tokensObj);return{theme:k(()=>h.value.theme),currentIcon:F,tokensObj:W,pool:d,halfBalance:$,coinLabels:A,t:a,addCommom:R,store:h,wallet:v,indicator:p,inputChange:w,importIcon:y,selectCoin:I,amountPirce:T,coinDecimals:_}}});const Ae=e=>(de("data-v-80d76574"),e=e(),ue(),e),Be={class:"card"},De={class:"top"},Me={key:1,class:"input-div"},Re={key:0},Pe={class:"loading-token"},Ve=["src","onerror"],Fe={key:0},ze=Ae(()=>s("use",{"xlink:href":"#icon-icon_on"},null,-1)),Ee=[ze],Ze={class:"bottom"},qe={key:0,class:"amount-price"},Ue={key:1},We={class:"top"},He={class:"right"},Ke={class:"balance"};function Je(e,r,a,U,V,h){const $=_e,p=re,I=fe,w=oe,L=ge,v=ye;return t(),l("div",Be,[s("div",De,[e.inputDisabled?(t(),l("div",Me,[e.inputValue?(t(),l("span",Re,m(e.inputValue),1)):(t(),O(p,{key:1,indicator:e.indicator},null,8,["indicator"]))])):(t(),O($,{key:0,value:e.inputValue=="InsufficientLiquidity"?"":e.inputValue,placeholder:"0.0",disabled:e.inputDisabled,onChange:e.inputChange,onInput:r[0]||(r[0]=n=>e.$emit("onInput",n.target.value)),onFocus:r[1]||(r[1]=n=>e.$emit("onFocus"))},null,8,["value","disabled","onChange"])),s("div",{class:q(["left",e.hasArrow?"":"nohands"]),onClick:r[2]||(r[2]=n=>e.hasArrow&&!e.pool.isTokenLoading?e.selectCoin():"")},[s("div",Pe,[e.pool.isTokenLoading?(t(),O(I,{key:0,active:e.active,size:"small",paragraph:!1},null,8,["active"])):(t(),l("img",{key:1,src:e.currentIcon,onerror:e.theme=="default"?("importIcon"in e?e.importIcon:g(y))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:g(y))("/image/coins/sui-unknown.png")},null,8,Ve)),j(w,{address:e.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"]),j(L,{loading:e.pool.isTokenLoading,class:"loading-token-skeleton",active:"",paragraph:!1},{default:f(()=>[s("div",null,[s("p",null,m(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1),e.coinLabels?(t(),l("p",Fe,m(e.coinLabels),1)):N("",!0)])]),_:1},8,["loading"])]),e.hasArrow?(t(),l("svg",{key:0,class:q(["icon",e.pool.isTokenLoading?"loading-drop-icon":""]),"aria-hidden":"true"},Ee,2)):N("",!0)],2)]),s("div",Ze,[e.inputValue&&e.amountPirce!="--"?(t(),l("div",qe," $"+m(e.amountPirce),1)):(t(),l("div",Ue)),s("div",We,[s("div",He,[E(m(e.isTotal?e.$t("common.total"):e.$t("common.balance"))+" ",1),s("span",Ke,m(e.wallet.connected?("addCommom"in e?e.addCommom:g(R))(e.balance,e.coinDecimals):"0"),1),e.havemax&&e.wallet.connected?(t(),O(v,{key:0,disabled:!e.coinName||("addCommom"in e?e.addCommom:g(R))(e.halfBalance,e.coinDecimals)==0,class:"max-btn",onClick:r[3]||(r[3]=n=>e.$emit("onHalf"))},{default:f(()=>[E(m("Half"))]),_:1},8,["disabled"])):N("",!0),e.havemax&&e.wallet.connected?(t(),O(v,{key:1,disabled:!e.coinName||("addCommom"in e?e.addCommom:g(R))(e.balance,e.coinDecimals)==0,class:"max-btn",onClick:r[4]||(r[4]=n=>e.$emit("onMax"))},{default:f(()=>[E(m(e.$t("button.max")),1)]),_:1},8,["disabled"])):N("",!0)])])])])}const Vo=ie(Ne,[["render",Je],["__scopeId","data-v-80d76574"]]);const Ge=te({components:{Modal:$e,LoadingOutlined:le},props:{existingCoins:{type:String,default:""},lastSelectCoin:{type:String,default:""}},setup(e,r){const{t:a,locale:U}=ae(),V=ne(),h=k(()=>V),$=se(),p=k(()=>$),I=K(),w=k(()=>I),L=M([a("tab.all"),a("tab.native"),a("tab.layerZero"),a("tab.wormhole"),a("tab.celer")]),v=M(a("tab.all")),n=M(a("tab.all")),d=K(),C=k(()=>d.chainName),T=M([]);console.log(T,"===>tokenList");const A=M(null);we(()=>{});const _=M(!1);Z(v,i=>{i!==a("tab.all")&&(_.value=!1),i==a("tab.all")?n.value=a("tab.all"):i==a("tab.layerZero")?n.value=a("tab.layerZero"):i==a("tab.wormhole")?n.value=a("tab.wormhole"):i==a("tab.celer")?n.value=a("tab.celer"):i==a("tab.native")&&(n.value=a("tab.native")),F(A.value)});const F=async i=>{var J,G,Q,X,Y;let u=[],b=p.value.tokens;if(!(w.value.chainName&&b&&b[0]&&w.value.chainName.toLowerCase().includes((J=b[0])==null?void 0:J.chain))){T.value=[],console.log("执行");return}let B=b;if(i&&i.split("::")&&i.split("::").length==3&&C.value=="Sui"){const c=be("Sui");try{const o=p.value.tokensObj[i]||await c.getTokenBySymbol(p.value.tokens,i);o&&((G=b.filter(S=>(S==null?void 0:S.address)===(o==null?void 0:o.address)))==null?void 0:G.length)<1&&($.setNewTokens({[i]:o}),B=b.concat(o))}catch(o){console.log("searchToken##err##",o)}}for(const c of Object.keys(B)){let o=Ce(B[c]);const S=h.value.assets[o.address]&&h.value.assets[o.address].balance?ke(h.value.assets&&h.value.assets[o.address].balance,o.decimals):0;e.lastSelectCoin&&o&&o.address===e.lastSelectCoin?o.unusable=!0:o.unusable=!1;const ce=((Q=p.value.tokensObj[o.address])==null?void 0:Q.labels)&&((X=p.value.tokensObj[o.address])==null?void 0:X.labels[0]),me=p.value.tokensObj[o.address]?(Y=p.value.tokensObj[o.address])==null?void 0:Y.name:o.name;o={...o,balance:S,labels:ce,name:me,sort:o.symbol=="APT"||o.symbol=="SUI"?1:-1},u.push(o)}let D;h.value.address?D=u.sort((c,o)=>o.coin_priority>c.coin_priority?1:-1).sort((c,o)=>o.balance-c.balance):D=u.sort((c,o)=>o.coin_priority>c.coin_priority?1:-1);let z=[];if(i){console.log(D,"sortResult=====>");const c=D.filter(o=>o.symbol.toLowerCase().indexOf(i.toLowerCase())!==-1||o.address.toLowerCase().indexOf(i.toLowerCase())!==-1);console.log(c,"===>result"),v.value!==a("tab.all")?z=c.filter(S=>v.value==a("tab.native")?!S.labels:S.labels&&S.labels.toLowerCase()==v.value.toLowerCase()):z=c}else console.log(v.value,"===>currentTab.value"),v.value!==a("tab.all")?z=D.filter(o=>v.value==a("tab.native")?!o.labels:o.labels&&o.labels.toLowerCase()==v.value.toLowerCase()):z=D;T.value=z.sort((c,o)=>o.sort-c.sort).sort((c,o)=>o.unusable-c.unusable),console.log(T.value,"tokenList.value===>322")},W=i=>{r.emit("onSelect",i),r.emit("onClose")};return Z(()=>[A.value,_.value],([i,u])=>{console.log(i,"===>keyword"),F(i)},{immediate:!0}),Z(()=>p.value.tokens,i=>{i&&(console.log(p.value.tokens,"===>pools.value.tokens"),F(A.value))},{immediate:!0}),{pools:p,t:a,chainName:C,tabList:L,currentTab:v,addCommom:R,tokenList:T,importIcon:y,keyword:A,wallet:h,toSelect:W,store:w,isShowAll:_}}}),Qe=""+globalThis.__publicAssetsURL("image/warning@2x.png");const P=e=>(de("data-v-20cbdee5"),e=e(),ue(),e),Xe=P(()=>s("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Ye={class:"coin-select-modal"},xe={class:"search-input"},eo=["placeholder"],oo=P(()=>s("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),no=[oo],so={key:0,class:"tab-list"},to=["onClick"],ao={class:"item"},lo=P(()=>s("div",{class:"line"},null,-1)),io={class:"coin-list-box"},ro={key:0,class:"coin-list"},uo=["onClick"],co={class:"left"},mo=["src"],po=["src"],vo={class:"name-box"},bo=P(()=>s("img",{src:Qe,alt:""},null,-1)),ko={class:"balance-box"},ho={class:"balance"},_o={key:0},fo={key:1},go={key:2},yo=P(()=>s("p",null,null,-1)),$o={key:1,class:"no-data"},wo={key:0,class:"token-loading"},Co={key:1,class:"no-data-content"},So={key:0,src:Oe},Io={key:1,src:je},Lo=P(()=>s("svg",{class:"icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon-information"})],-1));function To(e,r,a,U,V,h){const $=Le,p=H("loading-outlined"),I=Te,w=re,L=H("vue-scroll"),v=H("Modal");return t(),O(v,{title:e.$t("modal.selectTokenModalTitle"),class:"select-mod",width:420,centered:"",visible:!0,footer:null,onCancel:r[2]||(r[2]=n=>e.$emit("onClose"))},{closeIcon:f(()=>[Xe]),default:f(()=>[s("div",Ye,[s("div",xe,[Se(s("input",{"onUpdate:modelValue":r[0]||(r[0]=n=>e.keyword=n),onkeyup:"value=value.replace(/[^A-Za-z0-9]+$/g,'')",placeholder:e.$t("inputPlaceholder.selectTokenModalPlaceholder")},null,8,eo),[[Ie,e.keyword]]),e.keyword?(t(),l("svg",{key:0,class:"clear-icon icon modal-icon-close","aria-hidden":"true",onClick:r[1]||(r[1]=n=>e.keyword="")},no)):N("",!0)]),e.chainName!=="Sui"?(t(),l("div",so,[(t(!0),l(x,null,ee(e.tabList,(n,d)=>(t(),l("div",{key:d,class:q(["item-container",e.currentTab==n?"item-container-active item-container":"item-container"]),onClick:C=>e.currentTab=n},[s("div",ao,m(n),1)],10,to))),128))])):N("",!0),lo,s("div",io,[j(L,null,{default:f(()=>[e.tokenList&&e.tokenList.length>0?(t(),l("ul",ro,[(t(!0),l(x,null,ee(e.tokenList,(n,d)=>(t(),l("li",{key:d,class:q(n.unusable?"unusable":""),onClick:C=>e.toSelect(n)},[s("div",co,[n.isChinaToken?(t(),l("img",{key:1,src:e.store.theme=="default"?("importIcon"in e?e.importIcon:g(y))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:g(y))("/image/coins/sui-unknown.png"),alt:""},null,8,po)):(t(),l("img",{key:0,src:n.icon||n.logo_url||(e.store.theme=="default"?("importIcon"in e?e.importIcon:g(y))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:g(y))("/image/coins/sui-unknown.png"))},null,8,mo)),s("div",vo,[s("span",null,[E(m(n.symbol)+" ",1),n.isSelfBuilt?(t(),O($,{key:0,placement:"right","arrow-point-at-center":""},{title:f(()=>[s("span",null,m(e.t("newAdd.notCetusTokenList")),1)]),default:f(()=>[bo]),_:1})):N("",!0)]),s("p",null,m(n.name)+" "+m(n.labels?`(${n.labels})`:""),1)])]),s("div",ko,[s("div",ho,[e.wallet.loading?(t(),l("div",_o,[j(I,null,{default:f(()=>[j(p)]),_:1})])):n.balance&&e.wallet.connected?(t(),l("div",fo,m(("addCommom"in e?e.addCommom:g(R))(n.balance,n.decimals)),1)):(t(),l("div",go,"0"))]),yo])],10,uo))),128))])):(t(),l("div",$o,[e.pools.isTokenLoading?(t(),l("div",wo,[j(w)])):(t(),l("div",Co,[e.store.theme=="default"?(t(),l("img",So)):(t(),l("img",Io)),s("p",null,m(e.t("newAdd.noTokensFound")),1),s("div",null,[E(m(e.t("newAdd.enterCoinType"))+" ",1),j($,{placement:"bottom","arrow-point-at-center":""},{title:f(()=>[s("span",null,m(e.t("newAdd.uniqueIdOfCoin")),1)]),default:f(()=>[Lo]),_:1})])]))]))]),_:1})])])]),_:1},8,["title"])}const Fo=ie(Ge,[["render",To],["__scopeId","data-v-20cbdee5"]]);export{Vo as _,Fo as a};
