import{i as A}from"./import-icon.de3e6c66.js";import{a as J,i as x,u as ee,h as R,D as ce,f as re,b as me,p as pe}from"./pool.0a9aff1a.js";import{a as oe,J as ne,f,X as ve,Y as se,w as Z,h as ae,o as s,i as l,j as n,c as O,t as m,l as H,u as C,v as M,x as h,k as j,s as E,I as be,E as te,a5 as ke,S as he,B as fe,p as le,m as ie,M as ge,r as I,b as _e,a6 as ye,H as q,z as Ce,$ as $e,F as G,D as Q,y as we,a7 as Se}from"./entry.cb6f389e.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import{_ as Te,a as Le}from"./img-no-Positions_2x.94a06d88.js";const Ie=oe({props:{inputValue:{type:String,default:""},inputDisabled:{type:Boolean,default:!1},coinName:{type:String,default:""},coinSymbol:{type:String,default:""},balance:{type:Number,default:null},coinIcon:{type:String,default:""},havemax:{type:Boolean,default:!0},hasArrow:{type:Boolean,default:!0},isTotal:{type:Boolean,default:!1},importPage:{type:String,default:""},address:{type:String,default:""}},setup(e,d){const{t,locale:U}=ne(),V=J(),g=f(()=>V),$=f(()=>new ce(Number(e.balance)).div(2)),r=ve(se,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0});function T(){this.$emit("onSelect")}const _=v=>{const B=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${(k==null?void 0:k.value)&&(k==null?void 0:k.value)}})?).*$`);v.target.value=v.target.value.replace(B,"$1")},w=x(),c=f(()=>w),a=ee(),p=f(()=>a);let y={};Z(()=>p.value.RATES,v=>{v&&(console.log(v,"price====>"),y=v)},{immediate:!0});const b=f(()=>(console.log(e.inputValue,"==>props.inputValue"),console.log(e.coinName,"===>props.coinName"),re(Number(e.inputValue)*Number(y&&y[e.address]&&y[e.address].price),2))),N=f(()=>{var v,B,i;return console.log((v=p.value.tokensObj[e.address])==null?void 0:v.labels,"===> pool.value.tokensObj[props.address]?.labels"),p.value.tokensObj&&e.address&&p.value.tokensObj[e.address]&&((B=p.value.tokensObj[e.address])==null?void 0:B.labels)&&((i=p.value.tokensObj[e.address])==null?void 0:i.labels[0])}),k=f(()=>{var v;return p.value.tokensObj&&e.address&&p.value.tokensObj[e.address]&&((v=p.value.tokensObj[e.address])==null?void 0:v.decimals)});return{pool:p,halfBalance:$,coinLabels:N,t,addCommom:R,store:g,wallet:c,indicator:r,inputChange:_,importIcon:A,selectCoin:T,amountPirce:b,coinDecimals:k}}});const Oe=e=>(le("data-v-a3f41120"),e=e(),ie(),e),je={class:"card"},Ae={class:"top"},Ne={key:1,class:"input-div"},Be={key:0},De={class:"loading-token"},Me=["src"],Re={key:0},Pe=Oe(()=>n("use",{"xlink:href":"#icon-icon_on"},null,-1)),Ve=[Pe],ze={class:"bottom"},Ee={key:0,class:"amount-price"},Fe={key:1},Ze={class:"top"},He={class:"right"},Ue={class:"balance"};function qe(e,d,t,U,V,g){const $=be,r=te,T=ke,_=he,w=fe;return s(),l("div",je,[n("div",Ae,[e.inputDisabled?(s(),l("div",Ne,[e.inputValue?(s(),l("span",Be,m(e.inputValue),1)):(s(),O(r,{key:1,indicator:e.indicator},null,8,["indicator"]))])):(s(),O($,{key:0,value:e.inputValue=="InsufficientLiquidity"?"":e.inputValue,placeholder:"0.0",disabled:e.inputDisabled,onChange:e.inputChange,onInput:d[0]||(d[0]=c=>e.$emit("onInput",c.target.value)),onFocus:d[1]||(d[1]=c=>e.$emit("onFocus"))},null,8,["value","disabled","onChange"])),n("div",{class:H(["left",e.hasArrow?"":"nohands"]),onClick:d[2]||(d[2]=c=>e.hasArrow&&!e.pool.isTokenLoading?e.selectCoin():"")},[n("div",De,[e.pool.isTokenLoading?(s(),O(T,{key:0,active:e.active,size:"small",paragraph:!1},null,8,["active"])):(s(),l("img",{key:1,src:e.coinIcon?e.coinIcon:e.store.theme=="default"?("importIcon"in e?e.importIcon:C(A))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:C(A))("/image/coins/sui-unknown.png")},null,8,Me)),M(_,{loading:e.pool.isTokenLoading,class:"loading-token-skeleton",active:"",paragraph:!1},{default:h(()=>[n("div",null,[n("p",null,m(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1),e.coinLabels?(s(),l("p",Re,m(e.coinLabels),1)):j("",!0)])]),_:1},8,["loading"])]),e.hasArrow?(s(),l("svg",{key:0,class:H(["icon",e.pool.isTokenLoading?"loading-drop-icon":""]),"aria-hidden":"true"},Ve,2)):j("",!0)],2)]),n("div",ze,[e.inputValue&&e.amountPirce!="--"?(s(),l("div",Ee," $"+m(e.amountPirce),1)):(s(),l("div",Fe)),n("div",Ze,[n("div",He,[E(m(e.isTotal?e.$t("common.total"):e.$t("common.balance"))+" ",1),n("span",Ue,m(e.wallet.connected?("addCommom"in e?e.addCommom:C(R))(e.balance,e.coinDecimals):"0"),1),e.havemax&&e.wallet.connected?(s(),O(w,{key:0,disabled:!e.coinName||("addCommom"in e?e.addCommom:C(R))(e.halfBalance,e.coinDecimals)==0,class:"max-btn",onClick:d[3]||(d[3]=c=>e.$emit("onHalf"))},{default:h(()=>[E(m("Half"))]),_:1},8,["disabled"])):j("",!0),e.havemax&&e.wallet.connected?(s(),O(w,{key:1,disabled:!e.coinName||("addCommom"in e?e.addCommom:C(R))(e.balance,e.coinDecimals)==0,class:"max-btn",onClick:d[4]||(d[4]=c=>e.$emit("onMax"))},{default:h(()=>[E(m(e.$t("button.max")),1)]),_:1},8,["disabled"])):j("",!0)])])])])}const Do=ae(Ie,[["render",qe],["__scopeId","data-v-a3f41120"]]);const Je=oe({components:{Modal:ge,LoadingOutlined:se},props:{existingCoins:{type:String,default:""},lastSelectCoin:{type:String,default:""}},setup(e,d){const{t,locale:U}=ne(),V=x(),g=f(()=>V),$=ee(),r=f(()=>$),T=J(),_=f(()=>T),w=I([t("tab.all"),t("tab.native"),t("tab.layerZero"),t("tab.wormhole"),t("tab.celer")]),c=I(t("tab.all")),a=I(t("tab.all")),p=J(),y=f(()=>p.chainName),b=I([]);console.log(b,"===>tokenList");const N=I(null);_e(()=>{});const k=I(!1);Z(c,i=>{i!==t("tab.all")&&(k.value=!1),i==t("tab.all")?a.value=t("tab.all"):i==t("tab.layerZero")?a.value=t("tab.layerZero"):i==t("tab.wormhole")?a.value=t("tab.wormhole"):i==t("tab.celer")?a.value=t("tab.celer"):i==t("tab.native")&&(a.value=t("tab.native")),v(N.value)});const v=async i=>{var K,W,X,Y;let F=I([]),S=Object.values(r.value.newTokenObj);if(console.log("0313###updateTokenList####tokensObj####",S),console.log(_.value.chainName,"===>store.value.chainName"),console.log(S,"===》tokensObj"),!(_.value.chainName&&S&&S[0]&&_.value.chainName.toLowerCase().includes((K=S[0])==null?void 0:K.chain))){b.value=[],console.log("执行");return}let D;if(i&&i.split("::")&&i.split("::").length==3)if(y.value=="Aptos"){const u=[];r.value.chinaTokens.forEach(o=>{r.value.newTokenObj[o.address]||u.push({...o,isChinaToken:!0,unusable:!1})}),D=S.concat(u)}else{const o=await me("Sui").getTokenListByCoinTypes(i);console.log(o,"===>searchToken"),D=S.concat()}else D=S;console.log(D,"===>allTokenList");for(const u of Object.keys(D)){let o=ye(D[u]);console.log(o,"tokenInfo====>");const z=g.value.assets[o.address]&&g.value.assets[o.address].balance?pe(g.value.assets&&g.value.assets[o.address].balance,o.decimals):0;e.lastSelectCoin&&o&&o.address===e.lastSelectCoin?o.unusable=!0:o.unusable=!1;const de=((W=r.value.tokensObj[o.address])==null?void 0:W.labels)&&((X=r.value.tokensObj[o.address])==null?void 0:X.labels[0]);console.log(r.value.tokensObj,"===>pools.value.tokensObj"),console.log(o.address,"===>tokenInfo.address");const ue=r.value.tokensObj[o.address]?(Y=r.value.tokensObj[o.address])==null?void 0:Y.name:o.name;o={...o,balance:z,labels:de,name:ue,sort:o.symbol=="APT"||o.symbol=="SUI"?1:-1},F.value.push(o)}let L;if(g.value.address?L=F.value.sort((u,o)=>u.symbol.charCodeAt(0)-o.symbol.charCodeAt(0)).sort((u,o)=>o.balance-u.balance):L=F.value.sort((u,o)=>u.symbol.charCodeAt(0)-o.symbol.charCodeAt(0)),i){console.log(L,"sortResult=====>");const u=L.filter(o=>o.symbol.toLowerCase().indexOf(i.toLowerCase())!==-1||o.address.toLowerCase().indexOf(i.toLowerCase())!==-1);if(console.log(u,"===>result"),c.value!==t("tab.all")){const o=u.filter(z=>c.value==t("tab.native")?!z.labels:z.labels&&z.labels.toLowerCase()==c.value.toLowerCase());b.value=o}else b.value=u}else if(console.log(c.value,"===>currentTab.value"),c.value!==t("tab.all")){const u=L.filter(o=>(console.log(o.labels&&o.labels.toLowerCase(),"====>ele.labels"),console.log(c.value.toLowerCase(),"currentTab.value.toLowerCase()"),c.value==t("tab.native")?!o.labels:o.labels&&o.labels.toLowerCase()==c.value.toLowerCase()));b.value=u}else console.log(L,"===>sortResult"),b.value=L;b.value=b.value.sort((u,o)=>o.sort-u.sort).sort((u,o)=>o.unusable-u.unusable),console.log(b.value,"tokenList.value===>322")},B=i=>{d.emit("onSelect",i),d.emit("onClose")};return Z(()=>[N.value,k.value],([i,F])=>{console.log(i,"===>keyword"),v(i)},{immediate:!0}),Z(()=>r.value.tokens,i=>{i&&(console.log(r.value.tokens,"===>pools.value.tokens"),v(N.value))},{immediate:!0}),{pools:r,t,chainName:y,tabList:w,currentTab:c,addCommom:R,tokenList:b,importIcon:A,keyword:N,wallet:g,toSelect:B,store:_,isShowAll:k}}}),Ke=""+globalThis.__publicAssetsURL("image/warning@2x.png");const P=e=>(le("data-v-4c3cebb7"),e=e(),ie(),e),We=P(()=>n("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Xe={class:"coin-select-modal"},Ye={class:"search-input"},Ge=["placeholder"],Qe=P(()=>n("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),xe=[Qe],eo={key:0,class:"tab-list"},oo=["onClick"],no={class:"item"},so=P(()=>n("div",{class:"line"},null,-1)),ao={class:"coin-list-box"},to={key:0,class:"coin-list"},lo=["onClick"],io={class:"left"},uo=["src"],co=["src"],ro={class:"name-box"},mo=P(()=>n("img",{src:Ke,alt:""},null,-1)),po={class:"balance-box"},vo={class:"balance"},bo={key:0},ko={key:1},ho={key:2},fo=P(()=>n("p",null,null,-1)),go={key:1,class:"no-data"},_o={key:0,class:"token-loading"},yo={key:1,class:"no-data-content"},Co={key:0,src:Te},$o={key:1,src:Le},wo=P(()=>n("svg",{class:"icon","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-icon-information"})],-1));function So(e,d,t,U,V,g){const $=we,r=q("loading-outlined"),T=Se,_=te,w=q("vue-scroll"),c=q("Modal");return s(),O(c,{title:e.$t("modal.selectTokenModalTitle"),class:"select-mod",width:420,centered:"",visible:!0,footer:null,onCancel:d[2]||(d[2]=a=>e.$emit("onClose"))},{closeIcon:h(()=>[We]),default:h(()=>[n("div",Xe,[n("div",Ye,[Ce(n("input",{"onUpdate:modelValue":d[0]||(d[0]=a=>e.keyword=a),onkeyup:"value=value.replace(/[^A-Za-z0-9]+$/g,'')",placeholder:e.$t("inputPlaceholder.selectTokenModalPlaceholder")},null,8,Ge),[[$e,e.keyword]]),e.keyword?(s(),l("svg",{key:0,class:"clear-icon icon modal-icon-close","aria-hidden":"true",onClick:d[1]||(d[1]=a=>e.keyword="")},xe)):j("",!0)]),e.chainName!=="Sui"?(s(),l("div",eo,[(s(!0),l(G,null,Q(e.tabList,(a,p)=>(s(),l("div",{key:p,class:H(["item-container",e.currentTab==a?"item-container-active item-container":"item-container"]),onClick:y=>e.currentTab=a},[n("div",no,m(a),1)],10,oo))),128))])):j("",!0),so,n("div",ao,[M(w,null,{default:h(()=>[e.tokenList&&e.tokenList.length>0?(s(),l("ul",to,[(s(!0),l(G,null,Q(e.tokenList,(a,p)=>(s(),l("li",{key:p,class:H(a.unusable?"unusable":""),onClick:y=>e.toSelect(a)},[n("div",io,[a.isChinaToken?(s(),l("img",{key:1,src:e.store.theme=="default"?("importIcon"in e?e.importIcon:C(A))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:C(A))("/image/coins/sui-unknown.png"),alt:""},null,8,co)):(s(),l("img",{key:0,src:a.icon||a.logo_url||("importIcon"in e?e.importIcon:C(A))(`/image/coins/${a.symbol.toLowerCase()}.png`)},null,8,uo)),n("div",ro,[n("span",null,[E(m(a.symbol)+" ",1),a.isChinaToken?(s(),O($,{key:0,placement:"right","arrow-point-at-center":""},{title:h(()=>[n("span",null,m(e.t("newAdd.notCetusTokenList")),1)]),default:h(()=>[mo]),_:1})):j("",!0)]),n("p",null,m(a.name)+" "+m(a.labels?`(${a.labels})`:""),1)])]),n("div",po,[n("div",vo,[e.wallet.loading?(s(),l("div",bo,[M(T,null,{default:h(()=>[M(r)]),_:1})])):a.balance&&e.wallet.connected?(s(),l("div",ko,m(("addCommom"in e?e.addCommom:C(R))(a.balance,a.decimals)),1)):(s(),l("div",ho,"0"))]),fo])],10,lo))),128))])):(s(),l("div",go,[e.pools.isTokenLoading?(s(),l("div",_o,[M(_)])):(s(),l("div",yo,[e.store.theme=="default"?(s(),l("img",Co)):(s(),l("img",$o)),n("p",null,m(e.t("newAdd.noTokensFound")),1),n("div",null,[E(m(e.t("newAdd.enterCoinType"))+" ",1),M($,{placement:"bottom","arrow-point-at-center":""},{title:h(()=>[n("span",null,m(e.t("newAdd.uniqueIdOfCoin")),1)]),default:h(()=>[wo]),_:1})])]))]))]),_:1})])])]),_:1},8,["title"])}const Mo=ae(Je,[["render",So],["__scopeId","data-v-4c3cebb7"]]);export{Do as _,Mo as a};
