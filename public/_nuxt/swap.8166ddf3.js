import{_ as co}from"./refresh-icon.304964b6.js";import{_ as mo,a as vo}from"./coin-select.fac53448.js";import{a as fo,_ as po}from"./network-tips.1594145c.js";import{i as Z}from"./import-icon.de3e6c66.js";import{a as ye,i as Le,u as ke,f as R,g as Se,_ as Co,v as Re,b as bo,D as C,s as he,p as Fe,c as Ae,j as pe}from"./pool.0a9aff1a.js";import{a as We,M as go,J as qe,f as S,r as u,h as Ie,H as ho,o as g,c as x,x as le,j as o,u as D,t,s as oe,i as y,l as ce,v as ee,B as Qe,p as Ne,m as Be,a0 as Ao,w as z,k as _,X as wo,Y as So,b as yo,e as ko,a2 as we,G as je,E as Io,y as No}from"./entry.cb6f389e.js";import{d as Me}from"./numbers.df58b7b1.js";/* empty css              *//* empty css              */import"./decimal.aa264093.js";/* empty css              *//* empty css              *//* empty css              */import"./img-no-Positions_2x.94a06d88.js";const _e={SUI:{symbol:"SUI",name:"Sui Coin",decimals:8,balance:0,address:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::BTC"},sBTC:{symbol:"sBTC",name:"Wrapped BTC",decimals:8,balance:0,address:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::BTC"},sETH:{symbol:"sETH",name:"Wrapped Ether",decimals:8,balance:0,address:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::ETH"},USDC:{symbol:"USDC",name:"USDC Coin",decimals:6,balance:12e3,address:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::USDC"},USDT:{symbol:"USDT",name:"Tether USD",decimals:6,balance:1e4,address:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::USDT"}},Bo={"USDT-USDC":{symbol:"USDT-USDC",name:"USDT-USDC",decimals:6,coinA:_e.USDT,coinB:_e.USDC,feeDenominator:"10000",feeNumerator:"1",fee:"0.01",address:"0x1ce98d89494e9d3d7935bc3bd5fc714fc2abb99db3f024162552c4ba172f4d28::amm_swap::PoolLiquidityCoin<0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::USDT,0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::USDC>"}};function Oo(e,a){const c=Object.values(Bo).filter(m=>e===m.coinA.symbol&&a===m.coinB.symbol||e===m.coinB.symbol&&a===m.coinA.symbol);return c&&c[0]||null}const To=We({components:{Modal:go},props:{fromCoin:{type:Object,required:!0},toCoin:{type:Object,required:!0},fromCoinAmount:{type:String,required:!0},toCoinAmount:{type:String,required:!0},impact:{type:Number,required:!0},fee:{type:String,required:!0},fixedFromCoin:{type:Boolean,required:!0},formatFee:{type:String,default:""}},emits:["to-swap","on-close"],setup(e,a){const{t:c,locale:m}=qe(),I=ye(),$=Le();S(()=>$);const r=S(()=>{const p=Oo(e.fromCoin.symbol,e.toCoin.symbol);return Se(Me(e.fromCoinAmount).mul(Me(p.fee).div(100)).toString(),e.fromCoin.decimals)}),B=u(I.slippage||.5),k=u(!0),J=u(!1);function G(p){k.value=p}const L=async()=>{a.emit("to-swap")},K=ke(),O=S(()=>K),X=S(()=>O.value.tokensObj&&e.fromCoin.address&&O.value.tokensObj[e.fromCoin.address]&&O.value.tokensObj[e.fromCoin.address].logoURI),W=S(()=>O.value.tokensObj&&e.toCoin.address&&O.value.tokensObj[e.toCoin.address]&&O.value.tokensObj[e.toCoin.address].logoURI);return{fromCoinUrl:X,toCoinUrl:W,t:c,importIcon:Z,fixD:R,decimalFormat:Se,direct:k,changeDirect:G,rateChange:J,clickNextBtn:L,slippage:B,liquidityProviderFee:r}}});const Oe=e=>(Ne("data-v-ca95abc6"),e=e(),Be(),e),Uo=Oe(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Do={class:"swap-confirm-container"},$o={class:"card-content"},Eo={class:"top"},Po={class:"coin"},Ro=["src"],Fo=Oe(()=>o("div",{class:"svg-box"},[o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-swap2"})])],-1)),jo={class:"coin"},Mo=["src"],_o={class:"bottom"},Lo={class:"induction"},Wo={class:"item"},qo={class:"induction-text"},Qo={class:"induction-value induction-value-change"},Ko={key:0},Xo={key:1},Yo=Oe(()=>o("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),Ho=[Yo],zo={class:"item"},Zo={class:"induction-text"},Jo={class:"induction-value"},Go={class:"item"},Vo={class:"induction-text"},xo={class:"induction-value"},en={class:"item"},on={class:"induction-text"},nn={class:"item"},sn={class:"induction-text"},an={class:"induction-value"};function tn(e,a,c,m,I,$){const r=Qe,B=ho("Modal");return g(),x(B,{width:"440px",visible:!0,footer:null,title:e.$t("modal.swapConfirmTitle"),class:"swap-confirm-modal",onCancel:a[2]||(a[2]=k=>e.$emit("on-close"))},{closeIcon:le(()=>[Uo]),default:le(()=>[o("div",Do,[o("div",$o,[o("div",Eo,[o("div",Po,[o("img",{src:e.fromCoinUrl||("importIcon"in e?e.importIcon:D(Z))(`/image/coins/${e.fromCoin.symbol.toLowerCase()}.png`)},null,8,Ro),o("p",null,t(e.fromCoinAmount),1),oe("    "),o("p",null,t(e.fromCoin.symbol),1)]),Fo,o("div",jo,[o("img",{src:e.toCoinUrl||("importIcon"in e?e.importIcon:D(Z))(`/image/coins/${e.toCoin.symbol.toLowerCase()}.png`)},null,8,Mo),o("p",null,t(e.toCoinAmount),1),oe("    "),o("p",null,t(e.toCoin.symbol),1)])]),o("div",_o,[o("div",Lo,[o("div",Wo,[o("div",qo,t(e.$t("common.rate")),1),o("div",Qo,[e.rateChange?(g(),y("span",Xo," 1 "+t(e.toCoin.symbol)+" ≈ "+t(("fixD"in e?e.fixD:D(R))(Number(e.fromCoinAmount)/Number(e.toCoinAmount),e.toCoin.decimals))+" "+t(e.fromCoin.symbol),1)):(g(),y("span",Ko," 1 "+t(e.fromCoin.symbol)+" ≈ "+t(("fixD"in e?e.fixD:D(R))(Number(e.toCoinAmount)/Number(e.fromCoinAmount),e.toCoin.decimals))+" "+t(e.toCoin.symbol),1)),(g(),y("svg",{class:"icon-change","aria-hidden":"true",onClick:a[0]||(a[0]=k=>e.rateChange=!e.rateChange)},Ho))])]),o("div",zo,[o("div",Zo,t(e.$t("modal.slippageTolerance")),1),o("div",Jo,t(e.slippage)+"%",1)]),o("div",Go,[o("div",Vo,t(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),o("div",xo,t(e.fixedFromCoin?("fixD"in e?e.fixD:D(R))(e.toCoinAmount-Number(e.toCoinAmount)*Number(e.slippage)/100,e.toCoin.decimals):("fixD"in e?e.fixD:D(R))(Number(e.fromCoinAmount)*Number(e.slippage)/100+Number(e.fromCoinAmount),e.fromCoin.decimals))+" "+t(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1)]),o("div",en,[o("div",on,t(e.$t("common.priceImpact")),1),o("div",{class:ce(["induction-value",e.impact<1?"impact-s":e.impact<10&&e.impact>1?"impact-w":"impact-e"])},t(e.impact<.01?"<0.01":e.impact>100?"100":e.impact)+"% ",3)]),o("div",nn,[o("div",sn,t(e.$t("common.fee")),1),o("div",an,t(e.formatFee)+" "+t(e.fromCoin.symbol)+" ("+t(e.fee*100)+"%) ",1)])])])])]),ee(r,{class:"big-btn swap-confirm-btn",onClick:a[1]||(a[1]=k=>e.clickNextBtn())},{default:le(()=>[oe(t(e.$t("button.confirmSwap")),1)]),_:1})]),_:1},8,["title"])}const ln=Ie(To,[["render",tn],["__scopeId","data-v-ca95abc6"]]);async function rn(e){const{prices:a}=await $fetch(`https://api.coingecko.com/api/v3/coins/${e}/market_chart?vs_currency=usd&id=${e}&days=1&interval=hourly`,{headers:{Connection:"keep-alive",Accept:"*/*"}});return a}const un={props:{coin:{type:Object,default:()=>({})},refresh:{type:Boolean,default:!1},id:{type:String,default:""}},setup(e,a){const{$echarts:c}=Ao();let m=null,I;const $=u(!0),r=(h,l,d)=>{I={xAxis:{type:"category",boundaryGap:!1,show:!1,data:l},yAxis:{type:"value",show:!1,min:function(v){return v.min-v.min*.1},max:function(v){return v.max+v.max*.1}},grid:{top:1,right:1,bottom:1,left:1},tooltip:{trigger:"axis",borderWidth:0,padding:0,backgroundColor:"transparent",axisPointer:{lineStyle:{color:"#68FFD8"}},formatter:function(v){return`<div class="chart-tip">
              <div>${v&&v[0]&&v[0].name}</div>
              <div>$${R(v&&v[0]&&v[0].value,4)}</div>
            </chart-tip>`}},color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#0C4535"},{offset:1,color:"#151817"}]},series:[{data:h,type:"line",showSymbol:!1,areaStyle:{},lineStyle:{color:"#68FFD8",width:2,type:"solid"}}]},I&&m.clear(),I&&m.setOption(I,!0),m.resize(),$.value=!1},B=ke(),k=S(()=>B),J=u(""),G=u(""),L=async h=>{var ne,ue;const l=[],d=[],v=await rn(h);J.value=v&&v.length>1&&(v[v.length-1][1]-v[0][1])/v[0][1]*100,G.value=v&&v.length>1&&v[v.length-1][1],v.forEach(ae=>{l.push(ae[1]);const N=Re(ae[0],"MD"),q=Re(ae[0],"HM");d.push(N+" "+q)});let V=document.getElementById(`main${(ne=e.coin)==null?void 0:ne.name}`);m=c.init(V),r(l,d,(ue=e.coin)==null?void 0:ue.name)},K=ye(),O=S(()=>K),X=S(()=>O.value.chainName),W=S(()=>Co[X.value]);z(()=>e.id,(h,l)=>{console.log(h,l,"===>oldValue"),console.log(!$.value,"!isFirst.value"),h&&setTimeout(()=>{L(h)},1e3)},{immediate:!0});const p=u(""),b=u(""),re=u("");return z(()=>[k.value.tokensObj,e.coin],([h,l])=>{var d,v;h&&l&&h[l.address]&&(console.log(h[l.address],"===>newValue[coin.address]"),b.value=((d=h[l.address])==null?void 0:d.labels)&&((v=h[l.address])==null?void 0:v.labels[0]),p.value=h[l.address].name,re.value=h[l.address].symbol)},{immediate:!0,deep:!0}),z(()=>e.refresh,h=>{h&&L(e.id)}),{store:K,importIcon:Z,fixD:R,config:W,price_rate_24h:J,nowPrice:G,coinName:p,coinLabels:b,coinSymbol:re}}};const dn=e=>(Ne("data-v-a112913d"),e=e(),Be(),e),cn={class:"token-info"},mn={class:"token-info-padding"},vn={class:"token-info-header"},fn={class:"left"},pn=["src"],Cn={class:"name"},bn={class:"desc"},gn={class:"right"},hn={class:"price"},An={class:"token-info-footer"},wn={class:"left"},Sn={class:"address"},yn={class:"pc-address"},kn={class:"h5-address"},In=dn(()=>o("use",{"xlink:href":"#icon-icon-copy"},null,-1)),Nn=[In],Bn={class:"right"},On=["id"];function Tn(e,a,c,m,I,$){var r;return g(),y("div",cn,[o("div",mn,[o("div",vn,[o("div",fn,[o("img",{src:c.coin.logoURI||m.importIcon(`/image/coins/${c.coin.symbol.toLowerCase()}.png`)},null,8,pn),o("div",null,[o("div",Cn,t(m.coinSymbol),1),o("div",bn,[o("span",null,t(m.coinName)+" "+t(m.coinLabels?`(${m.coinLabels})`:""),1)])])]),o("div",gn,[o("div",hn,"$"+t(m.fixD(m.nowPrice,2)),1),m.price_rate_24h?(g(),y("div",{key:0,class:ce(m.price_rate_24h>0?"increase up":m.price_rate_24h<0?"increase down":"increase up")},t(m.price_rate_24h>0?`+ ${m.fixD(m.price_rate_24h,2)}`:m.price_rate_24h<0?+`${m.fixD(m.price_rate_24h,2)}`:`+${m.fixD(m.price_rate_24h,2)}`)+"% ",3)):_("",!0)])]),o("div",An,[o("div",wn,[o("div",Sn,[o("span",yn,t(c.coin&&c.coin.address.substr(0,8))+" ... "+t(c.coin&&c.coin.address.substr(c.coin.address.length-8,8)),1),o("span",kn,t(c.coin&&c.coin.address.substr(0,4))+" ... "+t(c.coin&&c.coin.address.substr(c.coin.address.length-4,4)),1),(g(),y("svg",{class:"icon","aria-hidden":"true",onClick:a[0]||(a[0]=B=>m.store.copy(c.coin&&c.coin.address))},Nn))])]),o("div",Bn,[o("div",{id:`main${(r=c.coin)==null?void 0:r.name}`,class:"main"},null,8,On)])])])])}const Un=Ie(un,[["render",Tn],["__scopeId","data-v-a112913d"]]),Dn=We({setup(){const e=je(),a=wo(So,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),{t:c,locale:m}=qe(),I=ye(),$=ke(),r=S(()=>$);let B=u(!1),k=u(!1),J=u(!1),G=u(!1),L=u(!1),K=u(!1);const O=u("fromCoin"),X=u(""),W=u(""),p=u(!1),b=u(!0),re=u(!1),h=u(!1),l=u(""),d=u(""),v=u(20),V=u(0),ne=u(null),ue=u(!1),ae=S(()=>I.slippage),N=S(()=>I.chainName),q=S(()=>N.value?bo(N.value):{}),n=u(),i=u(),Ce=S(()=>$.getPoolInfoSuccess),Ke=S(()=>w.value&&w.value.is_pause?"Pool Closed":!n.value||!i.value?c("modal.selectTokenModalTitle"):!w.value&&Ce.value?"Pool Not Found":ue.value?c("button.insufficientLiquidity"):!Number(l.value)||Number(l.value)==0||Number(d.value)==0?c("button.enterAmount"):Number(l.value)>Number(P.value)?c("button.insufficientBalance",{name:n.value.symbol}):c("button.swap")),Xe=s=>{var A,f,j,E;O.value=s,s==="fromCoin"?(X.value=((A=i.value)==null?void 0:A.address)||"",W.value=((f=n.value)==null?void 0:f.address)||""):(X.value=((j=n.value)==null?void 0:j.address)||"",W.value=((E=i.value)==null?void 0:E.address)||""),p.value=!0},Ye=s=>{l.value="",d.value="",O.value==="fromCoin"?(i.value&&s.address.toLowerCase()===(i==null?void 0:i.value.address.toLowerCase())&&(i.value=null),n.value=s):(n.value&&s.address.toLowerCase()===(n==null?void 0:n.value.address.toLowerCase())&&(n.value=null),i.value=s),p.value=!1},He=s=>{s==="fromCoin"?(b.value=!0,N.value==="Aptos"?l.value=P.value>0?n.value.symbol=="APT"?new C(Number(P.value)).sub(new C(.1)).lt(new C(0))?"0":new C(Number(P.value)).sub(new C(.1)).toString():String(P.value):"":l.value=P.value>0?n.value.symbol=="SUI"?new C(Number(P.value)).sub(new C(1e-4)).lt(new C(0))?"0":new C(Number(P.value)).sub(new C(1e-4)).toString():String(P.value):""):(b.value=!1,N.value==="Aptos"?d.value=F.value>0?i.value.symbol=="APT"?new C(Number(F.value)).sub(new C(.1)).lt(new C(0))?"0":new C(Number(F.value)).sub(new C(.1)).toString():String(F.value):"":d.value=F.value>0?i.value.symbol=="SUI"?new C(Number(F.value)).sub(new C(1e-4)).lt(new C(0))?"0":new C(Number(F.value)).sub(new C(1e-4)).toString():String(F.value):"")},ze=s=>{s==="fromCoin"?(b.value=!0,l.value=P.value>0?he(new C(Number(P.value)).div(2).toString(),n.value.decimals).toString():""):(b.value=!1,d.value=F.value>0?he(new C(Number(F.value)).div(2).toString(),i.value.decimals).toString():"")};yo(()=>{be()}),ko(()=>{clearInterval(ne.value)});const Ze=()=>{clearInterval(ne.value),V.value=0,k.value=!0,$.updateCurrentPools(w.value.poolAddress,N.value),te(b.value?l.value:d.value),I.getStatsData(N.value),setTimeout(()=>{k.value=!1,be()},1e3)},Je=()=>{const s=n.value;n.value=i.value,i.value=s,B.value=!0,b.value=!b.value,b.value?(l.value=d.value,d.value=""):(d.value=l.value,l.value=""),setTimeout(()=>{B.value=!1},300)},be=()=>{ne.value=setInterval(()=>{k.value=!1,re.value||V.value<v.value&&(V.value+=1,V.value===v.value&&(w.value&&w.value.poolAddress&&$.updateCurrentPools(w.value.poolAddress,N.value),V.value=0,k.value=!0))},1e3)};z(b,we((s,A)=>{b.value=s},500));const Te=u(!1);z(l,we((s,A)=>{s&&b.value&&te(s),s==""&&b.value&&(d.value="")},500)),z(d,we((s,A)=>{s&&!b.value&&te(s),s==""&&!b.value&&(l.value="")},500));const Ue=u(1e-4),Ge=()=>{if(w.value.current_sqrt_price&&l.value&&d.value){const A=(n.value.address===w.value.coinA.address&&i.value.address===w.value.coinB.address?0:1)==0,f=new C(l.value),j=new C(d.value),E=f.sub(f.mul(new C(w.value.fee)).div(100));console.log("getImpact###fAmount####",f.toString()),console.log("getImpact###tAmount####",j.toString()),console.log("getImpact###f####",E.toString());const Y=j.div(E);return console.log("getImpact####rates####",Y.toString()),q.value.getPriceImpactPct(w.value,Y.toString(),A)}return 1e-4},te=async s=>{if(w.value)if(n.value&&i.value&&(l.value||d.value)){h.value=!0,Te.value=!0,console.log(w.value,"poolInfo=====>451");const A=n.value.address===w.value.coinA.address&&i.value.address===w.value.coinB.address?0:1;console.log(b.value?l.value:d.value,"fixedFromCoin.value ? fromCoinAmount.value : toCoinAmount.value"),console.log(A,"===>direct");try{const f=await q.value.preSwap({pool:w.value,a2b:A==0,byAmountIn:b.value,amount:b.value?l.value:d.value});console.log(f,"preSwapRespreSwapRes"),ue.value=f.isExceed,b.value?(d.value=f.estimatedAmountOut,L.value?me.value=(s/Number(f.estimatedAmountOut)).toString():ve.value=(Number(f.estimatedAmountOut)/s).toString()):(l.value=f.estimatedAmountIn,L.value?me.value=(Number(f.estimatedAmountIn)/s).toString():ve.value=(s/Number(f.estimatedAmountIn)).toString()),Ue.value=Ge(),h.value=!1}catch(f){console.log("pre swap error",f),h.value=!1}}else b.value?d.value="":l.value="",h.value=!1},Ve=Le(),Q=S(()=>Ve),xe=u({}),me=u(""),ve=u("");z(B,()=>{me.value="",ve.value="",b.value?te(l.value):te(d.value)});const{setIsShowSuccess:eo,setIsShowRejected:De,setIsShowWaiting:fe,setTransactionDesc:oo,setTransactionTxid:$e}=I,no=async()=>{var A,f,j,E,Y,T,U,de;K.value=!1,h.value=!0,$e(""),oo(c("tips.swapping",{from:`${l.value} ${(A=n.value)==null?void 0:A.symbol}`,to:`${d.value} ${(f=i.value)==null?void 0:f.symbol}`})),fe(!0);const s=n.value.address===w.value.token_a.address&&i.value.address===w.value.token_b.address?0:1;try{console.log("0221####swap start####",N.value,"###",q);const H=await q.value.getSwapTransactionPayload({pool:w.value,a2b:s==0,byAmountIn:b.value,amount:b.value?l.value:d.value,slippage:Number(ae.value)/100});console.log("0221####swap###swapPayload###",H);let M;if(N.value==="Aptos")M=await Q.value.currentWallet.signAndSubmitTransaction(H);else{console.log("0221###swap###sui##signAndExecuteTransaction前###",N.value,"###swapPayload###",H);const ie=await Q.value.currentWallet.signAndExecuteTransactionBlock(H);console.log("0221###sui swap res###",ie),M=q.value.handleTx(ie),console.log("0221###swap###sui##tx###",M)}if(M&&M.hash){$e(M.hash),fe(!1),eo(!0);const ie={title:c("tips.swap"),desc:c("tips.swapSuccessText",{from:`${l.value} ${(j=n.value)==null?void 0:j.symbol}`,to:`${d.value} ${(E=i.value)==null?void 0:E.symbol}`}),hash:M.hash,tit:"Swap",icon:"icon-icon-swap1",tokenInfo:{tokena:`${(Y=n.value)==null?void 0:Y.symbol}`,numa:`- ${l.value}`,logoa:r.value.tokensObj&&n.value&&n.value.address&&r.value.tokensObj[n.value.address]&&r.value.tokensObj[n.value.address].logoURI,tokenb:`${(T=i.value)==null?void 0:T.symbol}`,numb:`+ ${d.value}`,logob:r.value.tokensObj&&i.value&&i.value.address&&r.value.tokensObj[i.value.address]&&r.value.tokensObj[i.value.address].logoURI},text:`Pay ${l.value} ${(U=n.value)==null?void 0:U.symbol} to receive ${d.value} ${(de=i.value)==null?void 0:de.symbol}`};N.value!=="Aptos"&&(ie.res=M.res),q.value.showTransitionPending(ie);const Pe=await q.value.watchTransaction(ie);console.log("0221###swap###transitionStatus####",Pe),Pe&&setTimeout(()=>{$.updateCurrentPools(w.value.poolAddress,N.value),q.value.getAccount(Q.value.address)},1e3)}else fe(!1),De(!0);l.value="",d.value="",h.value=!1}catch(H){l.value="",d.value="",console.log("Swap Error###",H),h.value=!1,fe(!1),De(!0)}},P=S(()=>Q.value.assets&&n.value&&Q.value.assets[n.value.address]?Fe(Q.value.assets[n.value.address].balance,n.value.decimals):0),F=S(()=>Q.value.assets&&i.value&&Q.value.assets[i.value.address]?Fe(Q.value.assets[i.value.address].balance,i.value.decimals):0),so=je();z(()=>r.value.newTokenObj,s=>{if(!Ae(s)){console.log(s,"===>newValue626"),console.log(so,"===>route625");const A=e?e.currentRoute.value.query.to:"",f=e?e.currentRoute.value.query.from:"";f?n.value=pe(s,f):(n.value=pe(s,I.chainName==="Aptos"?"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75::coin::CetusUSDT":"0x473d520316e4ea5550657410669c9da6cde191e570d63d754cee353e11746751::usdt::USDT"),console.log(n.value,"===>fromCoin.value")),A?i.value=pe(s,A):i.value=pe(s,I.chainName==="Aptos"?"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75::coin::CetusUSDC":"0x473d520316e4ea5550657410669c9da6cde191e570d63d754cee353e11746751::usdc::USDC"),!f&&A&&(n.value="")}},{immediate:!0});const w=S(()=>{var s,A,f,j;if(r.value.tokensObj&&n.value&&i.value){let E=null;const Y={};if(Object.values(r.value.poolConfigList).forEach(T=>{var U,de,H,M;(T.coinA.address.toUpperCase()===((U=n.value.address)==null?void 0:U.toUpperCase())&&T.coinB.address.toUpperCase()===((de=i.value.address)==null?void 0:de.toUpperCase())||T.coinB.address.toUpperCase()===((H=n.value.address)==null?void 0:H.toUpperCase())&&T.coinA.address.toUpperCase()===((M=i.value.address)==null?void 0:M.toUpperCase()))&&(Y[T.address]={...T})}),r.value.poolsObj&&!Ae(r.value.poolsObj))for(const T in r.value.poolsObj){const U=r.value.poolsObj[T];(U.token_a.address.toUpperCase()===((s=n.value.address)==null?void 0:s.toUpperCase())&&U.token_b.address.toUpperCase()===((A=i.value.address)==null?void 0:A.toUpperCase())||U.token_b.address.toUpperCase()===((f=n.value.address)==null?void 0:f.toUpperCase())&&U.token_a.address.toUpperCase()===((j=i.value.address)==null?void 0:j.toUpperCase()))&&(Y[U.address]={...U})}return E=Object.values(Y).sort((T,U)=>T.fee-U.fee)[0],E&&!Ae(E)?E:null}return null}),Ee=u(!0),ge=u(!1),ao=async s=>{s&&(te(b.value?l.value:d.value),ge.value=!0,s.coinA.symbol.toLowerCase()===n.value.symbol.toLowerCase()&&s.coinB.symbol.toLowerCase()===i.value.symbol.toLowerCase()?Ee.value=!0:Ee.value=!1)};z(()=>w.value,(s,A)=>{s&&(!A||s.address!==A.address||s.current_sqrt_price!==A.current_sqrt_price)&&ao(s)},{immediate:!0,deep:!0});const to=S(()=>r.value.tokensObj&&n.value&&n.value.address&&r.value.tokensObj[n.value.address]&&r.value.tokensObj[n.value.address].logoURI),io=S(()=>(console.log(r.value.tokensObj,"===>pools.value.tokensObj"),r.value.tokensObj&&i.value&&i.value.address&&r.value.tokensObj[i.value.address]&&r.value.tokensObj[i.value.address].logoURI)),lo=S(()=>r.value.tokensObj&&n.value&&n.value.address&&r.value.tokensObj[n.value.address]&&r.value.tokensObj[n.value.address].coingecko_id||null),ro=S(()=>r.value.tokensObj&&i.value&&i.value.address&&r.value.tokensObj[i.value.address]&&r.value.tokensObj[i.value.address].coingecko_id||null),uo=S(()=>{const s=new C(l.value),A=new C(w.value.fee),f=s.mul(A).toString();return console.log(f,"===>fee"),Number(f)<1/Math.pow(10,n.value.decimals)?`<${new C(1).div(new C(Math.pow(10,n.value.decimals))).toString()}`:he(f,n.value.decimals)});return console.log(ge.value,Ce.value,"===>getPoolInfoSuccess"),{hasPool:ge,getPoolInfoSuccess:Ce,halfBtnSelect:ze,formCoinId:lo,toCoinId:ro,fromCoinUrl:to,toCoinUrl:io,t:c,indicator:a,wallet:Q,currentLpInfo:xe,fixD:R,decimalFormat:Se,impact:Ue,oneFromAmount:me,oneToAmount:ve,importIcon:Z,clickExchange:Je,clickRefresh:Ze,refresh:k,change:B,isShowAddress:J,isShowSwapSetting:G,fromCoin:n,toCoin:i,slippage:ae,openCoinSelect:Xe,onCoinSelect:Ye,existingCoins:X,lastSelectCoin:W,currentCoinKey:O,showCoinSelect:p,fromCoinAmount:l,toCoinAmount:d,maxBtnSelect:He,fixedFromCoin:b,swapBtnText:Ke,toSwap:no,loading:re,swaping:h,autoRefreshTime:v,countdown:V,setMarketTimer:be,marketTimer:ne,rateChange:L,isSwapConfirmMpdal:K,fromCoinBlance:P,toCoinBlance:F,poolInfo:w,chainName:N,swapRouterLoading:Te,formatFee:uo}}}),$n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAGCBAMAAAAmlj/IAAAAFVBMVEVHcEwzMzMzMzMyMjI0NDQvLy8zMzOcydXuAAAABnRSTlMAy9hRbBs90ObtAAAAWklEQVRIx2NgYBFLdGBgYBVLS0sMYGBMMg1WE2BwU2VgCEphEDNgYGBOZEgLAMqnMaQxAEEaTBCqBKoBqh1qGAMDWwLDKDVKjVKj1Cg1So1So9QoNdwo6rccATYwqRNK4tkrAAAAAElFTkSuQmCC",En="data:image/png;base64,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";const se=e=>(Ne("data-v-049d267a"),e=e(),Be(),e),Pn={class:"swap-container"},Rn={class:"title"},Fn={class:"left"},jn={class:"right title-right"},Mn=se(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),_n={class:"swap-card"},Ln={class:"card-container"},Wn={class:"card-item"},qn={class:"card-item"},Qn=se(()=>o("use",{"xlink:href":"#icon-icon-swap1"},null,-1)),Kn=[Qn],Xn={key:0,class:"induction"},Yn={key:0,class:"exchange-rate-btn"},Hn={key:0},zn=["src"],Zn={key:0},Jn=["src"],Gn={key:1},Vn={key:0},xn=["src"],es=["src"],os=se(()=>o("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),ns=[os],ss={class:"item"},as={class:"induction-text"},ts={key:1},is={class:"item"},ls={class:"induction-text"},rs={class:"induction-value"},us={class:"item"},ds={class:"induction-text"},cs={class:"induction-value"},ms={key:0,class:"icon","aria-hidden":"true"},vs=se(()=>o("use",{"xlink:href":"#icon-icon-swap"},null,-1)),fs=[vs],ps={key:3,class:"token-info-container"},Cs={class:"token-info-title"},bs=se(()=>o("span",{class:"coingecko"},"Ref. CoinGecko",-1)),gs=se(()=>o("img",{src:En,alt:""},null,-1)),hs=se(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-information"})],-1));function As(e,a,c,m,I,$){const r=co,B=mo,k=Io,J=Qe,G=fo,L=vo,K=po,O=ln,X=No,W=Un;return g(),y("div",Pn,[o("div",Rn,[o("div",Fn,t(e.$t("menu.swap")),1),o("div",jn,[o("div",{class:"slippage-icon",onClick:a[0]||(a[0]=p=>e.isShowSwapSetting=!0)},[Mn,o("span",null,t(e.slippage)+"%",1)]),ee(r,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])]),o("div",_n,[o("div",Ln,[o("div",Wn,[ee(B,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":a[1]||(a[1]=p=>e.fromCoinAmount=p),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logo_url:"",address:e.fromCoin?e.fromCoin.address:"","swap-direction":"From",onOnMax:a[2]||(a[2]=p=>e.maxBtnSelect("fromCoin")),onOnHalf:a[3]||(a[3]=p=>e.halfBtnSelect("fromCoin")),onOnInput:a[4]||(a[4]=p=>{e.fromCoinAmount=p,e.fixedFromCoin=!0}),onOnSelect:a[5]||(a[5]=p=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])]),o("div",qn,[ee(B,{modelValue:e.toCoinAmount,"onUpdate:modelValue":a[6]||(a[6]=p=>e.toCoinAmount=p),"input-value":e.toCoinAmount,havemax:!1,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direction":"To","coin-icon":e.toCoin?e.toCoin.logo_url:"",address:e.toCoin?e.toCoin.address:"",onOnInput:a[7]||(a[7]=p=>{e.toCoinAmount=p,e.fixedFromCoin=!1}),onOnSelect:a[8]||(a[8]=p=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])]),o("img",{class:ce(e.change?"gang animationex":"gang"),src:$n,alt:""},null,2),o("div",{class:"exchange",onClick:a[9]||(a[9]=p=>e.clickExchange())},[(g(),y("svg",{class:ce(e.change?"icon animationex":"icon"),"aria-hidden":"true"},Kn,2))])]),e.poolInfo&&e.fromCoinAmount&&e.toCoinAmount&&e.fromCoinAmount!=="0"&&e.toCoinAmount!=="0"&&e.swapBtnText!==e.$t("button.poolNotFound")?(g(),y("div",Xn,[e.fromCoinAmount&&e.toCoinAmount?(g(),y("div",Yn,[e.rateChange?Number(e.fromCoinAmount)&&Number(e.toCoinAmount)&&e.rateChange?(g(),y("span",Gn,[Number(e.fromCoinAmount)&&Number(e.toCoinAmount)?(g(),y("span",Vn,[o("img",{src:e.toCoinUrl||("importIcon"in e?e.importIcon:D(Z))(`/image/coins/${e.toCoin.symbol.toLowerCase()}.png`)},null,8,xn),oe(" 1 "+t(e.toCoin.symbol)+" ≈ ",1),o("img",{src:e.fromCoinUrl||("importIcon"in e?e.importIcon:D(Z))(`/image/coins/${e.fromCoin.symbol.toLowerCase()}.png`)},null,8,es),oe(" "+t(("fixD"in e?e.fixD:D(R))(Number(e.fromCoinAmount)/Number(e.toCoinAmount),e.fromCoin.decimals))+" "+t(e.fromCoin.symbol),1)])):(g(),x(k,{key:1,indicator:e.indicator},null,8,["indicator"]))])):_("",!0):(g(),y("span",Hn,[o("img",{src:e.fromCoinUrl||("importIcon"in e?e.importIcon:D(Z))(`/image/coins/${e.fromCoin.symbol.toLowerCase()}.png`)},null,8,zn),oe(" 1 "+t(e.fromCoin.symbol)+" ≈ ",1),Number(e.fromCoinAmount)&&Number(e.toCoinAmount)?(g(),y("span",Zn,[o("img",{src:e.toCoinUrl||("importIcon"in e?e.importIcon:D(Z))(`/image/coins/${e.toCoin.symbol.toLowerCase()}.png`)},null,8,Jn),oe(" "+t(("fixD"in e?e.fixD:D(R))(Number(e.toCoinAmount)/Number(e.fromCoinAmount),e.toCoin.decimals))+" "+t(e.toCoin.symbol),1)])):(g(),x(k,{key:1,indicator:e.indicator},null,8,["indicator"]))])),(g(),y("svg",{class:"icon-change","aria-hidden":"true",onClick:a[10]||(a[10]=p=>e.rateChange=!e.rateChange)},ns))])):_("",!0),o("div",ss,[o("div",as,t(e.$t("common.priceImpact")),1),e.swaping?(g(),y("div",ts,[ee(k,{indicator:e.indicator},null,8,["indicator"])])):(g(),y("div",{key:0,class:ce(["induction-value",e.impact<1?"impact-s":e.impact<10&&e.impact>1?"impact-w":"impact-e"])},t(e.impact<.01?"<0.01":e.impact>100?"100":e.impact)+"% ",3))]),o("div",is,[o("div",ls,t(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),o("div",rs,t(e.fixedFromCoin?("fixD"in e?e.fixD:D(R))(Number(e.toCoinAmount)-Number(e.toCoinAmount)*Number(e.slippage)/100,e.toCoin.decimals):("fixD"in e?e.fixD:D(R))(Number(e.fromCoinAmount)*Number(e.slippage)/100+Number(e.fromCoinAmount),e.fromCoin.decimals))+" "+t(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1)]),o("div",us,[o("div",ds,t(e.$t("common.fee")),1),o("div",cs,t(e.formatFee)+" "+t(e.fromCoin.symbol)+" ("+t(e.poolInfo.fee*100)+"%) ",1)])])):_("",!0)]),ee(J,{disabled:e.wallet.connected?e.swaping||!e.fromCoin||!e.toCoin||!Number(e.fromCoinAmount)||!Number(e.toCoinAmount)||Number(e.fromCoinAmount)>Number(e.fromCoinBlance)||e.swapBtnText==e.$t("button.poolNotFound")||e.swapBtnText!==e.$t("button.swap")||e.poolInfo.is_pause:!1,class:"big-btn",loading:e.swaping||!e.poolInfo,onClick:a[11]||(a[11]=p=>e.wallet.connected?e.isSwapConfirmMpdal=!0:e.wallet.setIsShowWalletModal(!0))},{default:le(()=>[e.wallet.connected?(g(),y("svg",ms,fs)):_("",!0),o("span",null,t(e.wallet.connected?e.swapBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled","loading"]),ee(G),e.showCoinSelect?(g(),x(L,{key:0,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,onOnSelect:e.onCoinSelect,onOnClose:a[12]||(a[12]=p=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):_("",!0),e.isShowSwapSetting?(g(),x(K,{key:1,onOnClose:a[13]||(a[13]=p=>e.isShowSwapSetting=!1)})):_("",!0),e.isSwapConfirmMpdal?(g(),x(O,{key:2,"fixed-from-coin":e.fixedFromCoin,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,impact:e.impact,fee:e.poolInfo.fee,"format-fee":e.formatFee,onOnClose:a[14]||(a[14]=p=>e.isSwapConfirmMpdal=!1),onToSwap:e.toSwap},null,8,["fixed-from-coin","from-coin","to-coin","from-coin-amount","to-coin-amount","impact","fee","format-fee","onToSwap"])):_("",!0),e.chainName&&(e.formCoinId||e.toCoinId)?(g(),y("div",ps,[o("div",Cs,[bs,gs,ee(X,{placement:"top","arrow-point-at-center":""},{title:le(()=>[oe(" The following price is only an external reference from CoinGecko, which may not reflect actual data on Cetus. ")]),default:le(()=>[hs]),_:1})]),e.fromCoin&&e.formCoinId?(g(),x(W,{key:0,id:e.formCoinId,coin:e.fromCoin,refresh:e.refresh},null,8,["id","coin","refresh"])):_("",!0),e.toCoin&&e.toCoinId?(g(),x(W,{key:1,id:e.toCoinId,coin:e.toCoin,refresh:e.refresh},null,8,["id","coin","refresh"])):_("",!0)])):_("",!0)])}const Rs=Ie(Dn,[["render",As],["__scopeId","data-v-049d267a"]]);export{Rs as default};
