import{_ as ze}from"./xwhale-header.75b0636e.js";import{r as w,T as We,A as H,e as K,o as g,f as T,h as t,t as _,j as D,l as le,s as Y,p as z,k as J,m as d,i as R,c as L,w as X,B as fe,K as Je,u as Ae,x as ge,a as Le,a1 as en,a2 as nn,I as tn,S as an,v as on,z as ln,F as $e,q as Re,E as sn,a3 as un,a8 as rn}from"./entry.3b13b0c4.js";import{u as Ie,a as ke}from"./xcetus.1b192370.js";import{j as pe,a as we,h as U,s as he,c as Me,b as Be,p as q,u as Oe,v as ve,D as Pe}from"./pool.0f31120f.js";import{i as G}from"./import-icon.de3e6c66.js";import{_ as Ve}from"./xWHALE-icon.2df34cd4.js";import{_ as Fe}from"./WHALE-icon.28f954ba.js";import{_ as dn}from"./head-switch.5715a8a2.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import{_ as cn}from"./img-leverage_2x.1c577303.js";const mn={props:{startTime:{type:String,require:!0,default:""},endTime:{type:Number,require:!0,default:0}},setup(e,n){const u=w("--"),a=w("--"),b=w("--"),C=w("--");let c=null;We(()=>{window.clearInterval(c)});const y=()=>{const i=new Date().getTime()/1e3;Number(i)<=Number(e.startTime)&&s(e.startTime),Number(i)>Number(e.startTime)&&Number(i)<=Number(e.endTime)&&s(e.endTime)},s=i=>{clearInterval(c),window.clearInterval(c),c=setInterval(()=>{let h=new Date().getTime()/1e3;console.log(h,"nowTime===>");let m=i-parseInt(String(h));if(console.log(m,"times===>"),m==0){n.emit("countDown"),clearInterval(c),window.clearInterval(c),c=null;return}else m<0&&(clearInterval(c),window.clearInterval(c),n.emit("countDown"),c=null);m--;let o=parseInt(String(m/60/60/24));o=o<10?"0"+o:o;let k=parseInt(String(m/60/60%24));k=k<10?"0"+k:k;let N=parseInt(String(m/60%60));N=N<10?"0"+N:N;let x=parseInt(String(m%60));x=x<10?"0"+x:x,u.value=o,a.value=k,b.value=N,C.value=x},1e3)};return H(()=>e.startTime,(i,h)=>{i!==h&&y()},{immediate:!0}),{day:u,hour:a,min:b,sec:C}}};const vn={class:"count-time"};function gn(e,n,u,a,b,C){return g(),T("div",vn,[t("p",null,_(a.day),1),D(" : "),t("p",null,_(a.hour),1),D(" : "),t("p",null,_(a.min),1),D(" : "),t("p",null,_(a.sec),1)])}const hn=K(mn,[["render",gn],["__scopeId","data-v-8be4764c"]]),fn={props:{titleText:{type:String,default:""},tipsText:{type:String,default:""},imgIcon:{type:String,default:""},value:{type:String,default:"--"}},setup(e){const{t:n}=le();return{t:n}}};const pn=e=>(z("data-v-18a16c90"),e=e(),J(),e),wn={class:"table-rewards"},_n={class:"text-top-all"},bn={key:0,class:"icon-hover-box"},Cn=pn(()=>t("svg",{class:"icon","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-icon-information"})],-1)),yn={class:"tips-text-box"},Sn=["src"];function Tn(e,n,u,a,b,C){return g(),T("div",wn,[t("div",_n,[t("p",null,_(u.titleText),1),u.tipsText?(g(),T("div",bn,[Cn,t("div",yn,_(u.titleText=="est.APR"?"Estimated APR of the current epoch for all xCETUS holders.":"The number of qualified positions in this epoch."),1)])):Y("",!0)]),t("span",null,[t("p",null,[u.imgIcon?(g(),T("img",{key:0,src:u.imgIcon,alt:""},null,8,Sn)):Y("",!0),D(_(u.value),1)])])])}const An=K(fn,[["render",Tn],["__scopeId","data-v-18a16c90"]]),In={setup(e){const{t:n}=le(),u=Ie(),a=d(()=>u),b=d(()=>a.value.pendingAmount),C=d(()=>(console.log(a.value.nextStartTime,"===>xcetus.value.nextStartTime"),a.value.nextStartTime)),c=d(()=>1683094391),y=d(()=>a.value.xcetusShare&&U(a.value.xcetusShare,2)),s=pe(),i=d(()=>s),h=d(()=>a.value.cetusApr&&a.value.cetusApr>.01?U(he(a.value.cetusApr,2),2):U(a.value.cetusApr,2)),f=d(()=>a.value.pendingCoinInfo),m=w("");H(()=>f.value,v=>{v&&!Me(v)?m.value=`Pending yield (${v.symbol})`:m.value="Pending yield"},{immediate:!0});const o=()=>{setTimeout(()=>{u.getDividendManager()},3e3)},k=d(()=>a.value.dividendManagerInfo),N=d(()=>{const v=parseInt(String(new Date().getTime()/1e3)),P=k.value.interval_day,Z=(v-Number(k.value.start_time))/(P*24*3600);return console.log(parseInt(String(Z))>0,"====>(parseInt(String(time))) > 0"),parseInt(String(Z))>0}),x=we(),ie=d(()=>x),{setIsShowSuccess:j,setIsShowRejected:ue,setIsShowWaiting:M,setTransactionDesc:Ce,setTransactionTxid:re}=x,A=ke("Sui"),F=w(!1),ye=d(()=>a.value.venft_id),ee=d(()=>ie.value.chainName?Be(ie.value.chainName):{});return{t:n,pendingAmount:b,nextStartTime:C,wallet:i,myShare:y,importIcon:G,nextEndTime:c,pendingYieldText:m,cetusApr:h,pendingCoinInfo:f,getNextEpoch:o,canClaim:N,claimPendingYield:async()=>{F.value=!0,M(!0),re(""),Ce(`${n("tips.claimingPendingYield")} ${b.value} ${f.value.symbol}`);try{let v;const P=await A.getRedeemDividendPayload(ye.value);console.log(P,"payload==>");const Z=await i.value.currentWallet.signAndExecuteTransactionBlock(P);if(v=ee.value.handleTx(Z),v&&v.hash){re(v.hash),M(!1),j(!0);const p={title:"Claim",desc:`Claimed ${b.value} ${f.value.symbol} successfully.`,hash:v.hash,tit:"Claimed Rewards",icon:"icon-icon-Removed",tokenInfo:{tokena:f.value.symbol,numa:`+ ${b.value}`,logoa:f.value.logo_url}};ee.value.showTransitionPending(p);const ne=await ee.value.watchTransaction(p);console.log("0221###swap###transitionStatus####",ne),ne&&setTimeout(()=>{u.getVeNFTDividendInfo(),F.value=!1},3e3),u.getOwnerLockCetuss(i.value.address)}else M(!1),ue(!0),F.value=!1}catch(v){M(!1),ue(!0),F.value=!1,console.log(v,"error===>")}},claimLoading:F,addCommom:U}}},kn=""+new URL("staking-rewards-banner-h5.1c7401db.png",import.meta.url).href,Bn="data:image/png;base64,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";const _e=e=>(z("data-v-99f5258f"),e=e(),J(),e),Nn={class:"top-banner"},xn=_e(()=>t("img",{src:kn,alt:""},null,-1)),Dn=_e(()=>t("p",null,"Convert CETUS to xCETUS to start earning",-1)),En={class:"bot-count"},Un=_e(()=>t("span",null,"Reward distribution in ",-1)),$n={class:"holder-rewards"},Rn={class:"title"},Pn=_e(()=>t("div",{class:"left"},[t("img",{src:Bn,alt:""}),t("span",null,"xCETUS Staking Rewards")],-1)),Wn={class:"right"},Ln={class:"rewards-value"},Mn={class:"claim-h5"};function On(e,n,u,a,b,C){var i;const c=hn,y=fe,s=An;return g(),T("div",null,[t("div",Nn,[xn,Dn,t("div",En,[Un,R(c,{"start-time":a.nextStartTime,onCountDown:n[0]||(n[0]=h=>e.$emit("getNextEpoch"))},null,8,["start-time"])])]),t("div",$n,[t("div",Rn,[Pn,t("div",Wn,[a.wallet&&a.wallet.address?(g(),L(y,{key:0,disabled:!a.canClaim||a.pendingAmount=="--"||a.pendingAmount<=0,loading:a.claimLoading,onClick:a.claimPendingYield},{default:X(()=>[D(" Claim ")]),_:1},8,["disabled","loading","onClick"])):Y("",!0)])]),t("div",Ln,[R(s,{"title-text":"est.APR","tips-text":"good",value:a.cetusApr+"%"},null,8,["title-text","value"]),R(s,{"title-text":"My share",value:a.myShare+"%"},null,8,["value"]),R(s,{"title-text":a.pendingYieldText,"img-icon":(i=a.pendingCoinInfo)==null?void 0:i.logo_url,value:a.addCommom(a.pendingAmount,6)},null,8,["title-text","img-icon","value"])]),t("div",Mn,[a.wallet&&a.wallet.address?(g(),L(y,{key:0,disabled:!a.canClaim||a.pendingAmount=="--"||a.pendingAmount<=0,loading:a.claimLoading,onClick:n[1]||(n[1]=h=>e.$emit("claimPendingYield"))},{default:X(()=>[D(" Claim ")]),_:1},8,["disabled","loading"])):Y("",!0)])])])}const Vn=K(In,[["render",On],["__scopeId","data-v-99f5258f"]]),Fn={props:{startTime:{type:String,require:!0,default:""},endTime:{type:Number,require:!0,default:0}},setup(e,n){const u=w("--"),a=w("--"),b=w("--"),C=w("--");let c=null;We(()=>{window.clearInterval(c)});const y=()=>{const i=new Date().getTime()/1e3;Number(i)<=Number(e.startTime)&&s(e.startTime),Number(i)>Number(e.startTime)&&Number(i)<=Number(e.endTime)&&s(e.endTime)},s=i=>{c=setInterval(()=>{let h=new Date().getTime()/1e3,m=i-parseInt(String(h));if(m==0){n.emit("countDown"),clearInterval(c),window.clearInterval(c),c=null;return}else m<0&&(clearInterval(c),window.clearInterval(c),n.emit("countDown"),c=null);m--;let o=parseInt(String(m/60/60/24));o=o<10?"0"+o:o;let k=parseInt(String(m/60/60%24));k=k<10?"0"+k:k;let N=parseInt(String(m/60%60));N=N<10?"0"+N:N;let x=parseInt(String(m%60));x=x<10?"0"+x:x,u.value=o,a.value=k,b.value=N,C.value=x},1e3)};return H(()=>e.startTime,(i,h)=>{i!==h&&y()},{immediate:!0}),{day:u,hour:a,min:b,sec:C}}};const be=e=>(z("data-v-131b3f4e"),e=e(),J(),e),Hn={class:"count-down"},Yn=be(()=>t("span",null,"D : ",-1)),Xn=be(()=>t("span",null,"H : ",-1)),jn=be(()=>t("span",null,"M : ",-1)),Zn=be(()=>t("span",null,"S",-1));function qn(e,n,u,a,b,C){return g(),T("div",Hn,[D(_(a.day)+" ",1),Yn,D(" "+_(a.hour)+" ",1),Xn,D(" "+_(a.min)+" ",1),jn,D(" "+_(a.sec)+" ",1),Zn])}const Gn=K(Fn,[["render",qn],["__scopeId","data-v-131b3f4e"]]),Kn={components:{WcountDown:Gn},props:{vItem:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1}},setup(e,n){const{t:u}=le();console.log(e.vItem,"vItem");const a=Ie(),b=we(),C=d(()=>b),c=o=>{n.emit("claim",o),a.setClaimLoading(o.id)},y=d(()=>a),s=d(()=>new Date().getTime()/1e3>e.vItem.locked_until_time),i=o=>{n.emit("cancelRedeemPayload",o),a.setClaimLoading(o.id)};d(()=>C.value.chainName),ke("Sui");const h=pe();return d(()=>h),d(()=>y.value.venft_id),d(()=>C.value.chainName?Be(C.value.chainName):{}),{t:u,prettyAmount:q,claimBoolean:s,toClaim:c,toCancel:i,claimWhale:o=>{n.emit("claimWhale",o)},cancelRedeemPayload:o=>{n.emit("cancelRedeemPayload",o)}}}};const Ne=e=>(z("data-v-50809946"),e=e(),J(),e),Qn={class:"vesting-box"},zn={class:"left"},Jn=Ne(()=>t("img",{src:Ve,alt:""},null,-1)),et=Ne(()=>t("svg",{class:"icon","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-icon-swap2"})],-1)),nt=Ne(()=>t("img",{src:Fe,alt:""},null,-1)),tt={class:"available-all"},at={class:"available"},ot={key:0},lt={key:1};function st(e,n,u,a,b,C){const c=Je("WcountDown"),y=fe;return g(),T("div",Qn,[t("div",zn,[t("p",null,[t("span",null,[Jn,D(" "+_(("addCommom"in e?e.addCommom:Ae(U))(a.prettyAmount(u.vItem.xcetus_amount,9),9))+" xCETUS ",1)]),et,t("span",null,[nt,D(" "+_(("addCommom"in e?e.addCommom:Ae(U))(a.prettyAmount(u.vItem.cetus_amount,9),9))+" CETUS ",1)])]),t("div",tt,[t("div",at,[t("span",null,_(a.claimBoolean?"Available":"Available in"),1),a.claimBoolean?Y("",!0):(g(),L(c,{key:0,"start-time":u.vItem.locked_start_time,"end-time":u.vItem.locked_until_time,onCountDown:n[0]||(n[0]=s=>e.$emit("countDown"))},null,8,["start-time","end-time"]))]),t("div",{class:ge(a.claimBoolean?"highlight right-h5":"right-h5")},[a.claimBoolean?(g(),T("span",ot,"Claim")):(g(),T("span",lt,"Cancel"))],2)])]),a.claimBoolean?(g(),L(y,{key:0,disabled:!a.claimBoolean||u.loading,loading:u.loading,onClick:n[1]||(n[1]=s=>a.claimWhale(u.vItem))},{default:X(()=>[D(_(a.claimBoolean?"Claim":"Cancel"),1)]),_:1},8,["disabled","loading"])):(g(),L(y,{key:1,type:"text",class:"right",disabled:u.loading,loading:u.loading,onClick:n[2]||(n[2]=s=>a.cancelRedeemPayload(u.vItem))},{default:X(()=>[D(_(a.claimBoolean?"Claim":"Cancel"),1)]),_:1},8,["disabled","loading"]))])}const it=K(Kn,[["render",st],["__scopeId","data-v-50809946"]]),ut=Le({props:{inputValue:{type:String,default:""},coinSymbol:{type:String,default:""},whaleDirection:{type:String,default:""},address:{type:String,default:""},balance:{type:String,default:""}},setup(e,n){const{t:u,locale:a}=le(),b=we(),C=d(()=>b),c=en(nn,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),y=pe(),s=d(()=>y),i=Oe(),h=d(()=>i),f=o=>{const N=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,9})?).*$");o.target.value=o.target.value.replace(N,"$1")},m=d(()=>{var o;return h.value.tokensObj&&e.address&&h.value.tokensObj[e.address]&&((o=h.value.tokensObj[e.address])==null?void 0:o.decimals)});return H(()=>h.value.RATES,o=>{o&&console.log(o,"price====>")},{immediate:!0}),{pool:h,t:u,addCommom:U,store:C,wallet:s,indicator:c,inputChange:f,importIcon:G,coinDecimals:m}}});const rt=e=>(z("data-v-83d9dead"),e=e(),J(),e),dt={class:"card"},ct={class:"top"},mt={class:"left"},vt={class:"loading-token"},gt={key:0,src:Fe,alt:""},ht={key:1,src:Ve,alt:""},ft={class:"bottom"},pt=rt(()=>t("div",null,null,-1)),wt={class:"top"},_t={class:"right"},bt={key:0,class:"balance"};function Ct(e,n,u,a,b,C){var i,h;const c=tn,y=an,s=fe;return g(),T("div",dt,[t("div",ct,[R(c,{value:e.inputValue,placeholder:"0.0",onChange:e.inputChange,onInput:n[0]||(n[0]=f=>e.$emit("onInput",f.target.value)),onFocus:n[1]||(n[1]=f=>e.$emit("onFocus"))},null,8,["value","onChange"]),t("div",mt,[t("div",vt,[e.coinSymbol=="CETUS"?(g(),T("img",gt)):(g(),T("img",ht)),t("div",null,[t("p",null,_(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1)])])])]),t("div",ft,[pt,t("div",wt,[t("div",_t,[t("span",null,_(e.$t("common.balance")),1),e.balance?(g(),T("span",bt,_(e.balance>1?("addCommom"in e?e.addCommom:Ae(U))(e.balance):e.balance),1)):(g(),L(y,{key:1,loading:!0,class:"loading-token-skeleton",active:"",paragraph:!1})),e.whaleDirection=="From"?(g(),L(s,{key:2,class:"max-btn",disabled:!e.balance||e.balance==0||!((i=e.wallet)!=null&&i.address),onClick:n[2]||(n[2]=f=>e.$emit("halfBalanne"))},{default:X(()=>[D(_("Half"))]),_:1},8,["disabled"])):Y("",!0),e.whaleDirection=="From"?(g(),L(s,{key:3,class:"max-btn",disabled:!e.balance||e.balance==0||!((h=e.wallet)!=null&&h.address),onClick:n[3]||(n[3]=f=>e.$emit("maxBalanne"))},{default:X(()=>[D(_(e.$t("button.max")),1)]),_:1},8,["disabled"])):Y("",!0)])])])])}const yt=K(ut,[["render",Ct],["__scopeId","data-v-83d9dead"]]),St=Le({setup(){const e=Ie(),n=d(()=>e),u=d(()=>n.value.venft_id),a=d(()=>n.value.venftInfo),b=Oe(),C=d(()=>b);d(()=>C.value.tokensObj&&C.value.tokensObj["0x2a4f647bc73f070182436658bff75060246019857c769ad9268c22c4472bca7f::cetus::CETUS"]);const c=w("");let y=w(!1);const s=w(""),i=w(""),h=w(!1),f=w("convert"),{t:m}=le(),o=w([{time:"15 D",num:15},{time:"30 D",num:30},{time:"90 D",num:90},{time:"180 D",num:180}]),k=w([{name:"est.APR",value:"100.12%"},{name:"My share",value:"<0.1%"},{name:"Pending yield (USDC)",value:0}]),N=w([{name:"My total locked",value:"$100.12"},{name:"Pending rewards (xCETUS)",value:"100.12"},{name:"",value:""}]),x=w([{name:"My positions",value:"12"},{name:"My qualified positions",value:"0"},{name:"Pending rewards (xCETUS)",value:"100.12"}]),ie=window.setInterval(()=>{e.getXcetusApr(),p.value.address&&(e.getMyShare(p.value.address),e.getVeNFTDividendInfo())},6e4);on(()=>{document.addEventListener("visibilitychange",()=>{document.hidden||e.getDividendManager()}),e.getXcetusApr(),e.getDividendManager()}),ln(()=>{window.clearInterval(ie)});const j=d(()=>(console.log(n.value.whaleBalance,"==>xcetus.value.whaleBalance"),n.value.whaleBalance)),ue=d(()=>n.value.xWhaleBalance),M=d(()=>n.value.availableXwhale),Ce=d(()=>n.value.redeemingXwhale),re=d(()=>{if(f.value=="convert"){if(Number(s.value)>Number(j.value))return!0}else if(Number(s.value)>Number(M.value))return!0;return!s.value||!i.value||Number(s.value)==0||Number(i.value)==0}),A=w("180"),F=d(()=>(console.log(f.value=="convert","===>1212211"),f.value=="convert"&&Number(s.value)>Number(j.value)?m("button.insufficientBalance",{name:"CETUS"}):f.value!=="convert"&&Number(s.value)>Number(M.value)?m("button.insufficientBalance",{name:"xCETUS"}):Number(A.value)<15?"Minimum vesting duration is 15 days":f.value=="convert"&&u?"Convert":f.value!=="convert"&&u?"Redeem":"Convert"));console.log(F.value,"btnText.value===>");const ye=l=>{s.value="",i.value="",f.value=l},ee=()=>{y.value=!0,setTimeout(()=>{y.value=!1},300)},xe=l=>{A.value=l},v=w(!1),P=ke("Sui"),Z=pe(),p=d(()=>Z),ne=d(()=>n.value.ownerLocks);H(()=>p.value.address,l=>{console.log("触发",l),l?(e.getOwnerVeNFT(l),e.getAccountWhaleBalance(l),e.getOwnerLockCetuss(l),e.getMyShare(l)):e.loginOut()},{immediate:!0});const E=d(()=>Se.value.chainName?Be(Se.value.chainName):{}),De=we(),Se=d(()=>De),te=d(()=>Se.value.chainName),{setIsShowSuccess:ae,setIsShowRejected:O,setIsShowWaiting:I,setTransactionDesc:oe,setTransactionTxid:V}=De,Ee=async()=>{v.value=!0,I(!0),V(""),oe(m("tips.converting",{from:`${U(s.value,9)} CETUS`,and:"to",to:`${U(s.value,9)} xCETUS`}));try{let l;const r=ve(s.value,9);console.log(u.value,"===>venft_id.value");const S=await P.depositCetus(r,u.value);console.log(S,"payload==>");const $=await p.value.currentWallet.signAndExecuteTransactionBlock(S);if(l=E.value.handleTx($),l&&l.hash){V(l.hash),I(!1),ae(!0);const B={title:"Converted",desc:`Converted ${U(s.value,9)} xCETUS successfully`,hash:l.hash,tit:"Converted",icon:"icon-icon-Swap",tokenInfo:{tokena:"CETUS",numa:`- ${s.value}`,logoa:G("/sui-image/WHALE-icon.png"),tokenb:"xCETUS",numb:`+ ${s.value}`,logob:G("/sui-image/xWHALE-icon.png")}};te.value!=="Aptos"&&(B.res=l.res),E.value.showTransitionPending(B);const W=await E.value.watchTransaction(B);console.log("0221###swap###transitionStatus####",W),W&&setTimeout(()=>{e.getAccountWhaleBalance(p.value.address),e.getOwnerVeNFT(p.value.address),e.getOwnerLockCetuss(p.value.address),e.getMyShare(p.value.address)},3e3),v.value=!1}else I(!1),O(!0),v.value=!1;s.value=""}catch(l){I(!1),O(!0),v.value=!1,s.value="",console.log(l,"error===>")}},Q=w(!0),Te=w("0"),He=async()=>{const l=ve(s.value,9),r=await P.redeemNum(l,Number(A.value));i.value=q(r.amountOut,9),console.log("===>amount2222"),Te.value=r.percent},Ye=async()=>{const l=ve(i.value,9),r=await P.reverseRedeemNum(l,Number(A.value));console.log(r,"===>amount111"),s.value=q(r.amountOut,9),Te.value=r.percent};H(()=>[s.value,A.value,Q.value],([l,r,S])=>{console.log(l,"===>>>>>>>fromCoinAmount",typeof l),l&&r&&S&&Number(r)>=15&&He(),!l&&S&&(i.value="")},{immediate:!0}),H(()=>[i.value,A.value,Q.value],([l,r,S])=>{l&&r&&!S&&Number(r)>=15&&(Ye(),console.log(l,"===>toCoinAmount")),!l&&!S&&(s.value="")},{immediate:!0}),H(()=>[A.value,Q.value],([l,r])=>{Number(l)>180?A.value="180":Number(l)<15?r?i.value="":s.value="":l||(r?s.value="":i.value="")},{immediate:!0});const Xe=()=>{Q.value=!0,s.value=he(new Pe(f.value!=="convert"?M.value:j.value).div(new Pe(2)).toString(),9)},je=()=>{Q.value=!0,s.value=f.value!=="convert"?he(M.value,9):he(j.value,9)},Ue=async()=>{v.value=!0,I(!0),V(""),oe(m("tips.redeeming",{from:`${U(s.value,9)} xCETUS`,to:`${U(i.value,9)} CETUS`}));try{let l;const r=ve(s.value,9);console.log(r.toString(),"538====>");const S=await P.getRedeemLockPayload(r,u.value,Number(A.value));console.log(S,"payload==>");const $=await p.value.currentWallet.signAndExecuteTransactionBlock(S);if(l=E.value.handleTx($),l&&l.hash){V(l.hash),I(!1),ae(!0);const B={title:"Redemption",desc:"Redemption transaction submitted successfully.",hash:l.hash,tit:"Vesting",icon:"icon-icon-Removed",tokenInfo:{tokena:"xCETUS",numa:`- ${s.value}`,logoa:G("/sui-image/xWHALE-icon.png")}};te.value!=="Aptos"&&(B.res=l.res),E.value.showTransitionPending(B);const W=await E.value.watchTransaction(B);console.log("0221###swap###transitionStatus####",W),W&&setTimeout(()=>{e.getAccountWhaleBalance(p.value.address),e.getOwnerVeNFT(p.value.address),e.getOwnerLockCetuss(p.value.address),e.getMyShare(p.value.address)},3e3),v.value=!1}else I(!1),O(!0),v.value=!1;s.value="",i.value=""}catch(l){I(!1),O(!0),v.value=!1,s.value="",i.value="",console.log(l,"error===>")}};H(()=>[u.value,ne.value,a.value,p.value.address],([l,r,S,$])=>{$&&(l&&e.getVeNFTDividendInfo(),l&&!Me(S)&&r&&r.length>0&&(console.log("执行了",r),e.getAvailableXCetus()))},{immediate:!0,deep:!0});const Ze=async l=>{v.value=!0,I(!0),V(""),oe("");try{let r;console.log(l.id,"==>vItem.id");const S=await P.getCancelRedeemPayload(l.id,u.value);console.log(S,"payload==>");const $=await p.value.currentWallet.signAndExecuteTransactionBlock(S);if(r=E.value.handleTx($),r&&r.hash){V(r.hash),I(!1),ae(!0);const B={title:"Cancelled Redemption",desc:"Cancelled redemption successfully.",hash:r.hash,tit:"Cancelled Redemption",icon:"icon-a-icon-Shutdown",tokenInfo:{tokena:"xCETUS",numa:`+ ${q(l.xcetus_amount,9)}`,logoa:G("/sui-image/xWHALE-icon.png")}};te.value!=="Aptos"&&(B.res=r.res),E.value.showTransitionPending(B);const W=await E.value.watchTransaction(B);console.log("0221###swap###transitionStatus####",W),W&&setTimeout(()=>{e.getOwnerVeNFT(p.value.address),e.getOwnerLockCetuss(p.value.address),v.value=!1},3e3)}else I(!1),O(!0),v.value=!1;s.value="",i.value=""}catch(r){I(!1),O(!0),v.value=!1,s.value="",i.value="",e.setClaimLoading(""),console.log(r,"error===>")}},qe=w({}),Ge=()=>{console.log("倒计时结束"),e.getOwnerLockCetuss(p.value.address)},Ke=async l=>{console.log(l,"vItem===>"),v.value=!0,I(!0),V(""),oe(`${m("tips.claimingPendingYield")} ${U(q(l.cetus_amount,9),9)} CETUS`);try{let r;const S=await P.getRedeemPayload(l.id,u.value);console.log(S,"payload==>");const $=await p.value.currentWallet.signAndExecuteTransactionBlock(S);if(r=E.value.handleTx($),r&&r.hash){V(r.hash),I(!1),ae(!0);const B={title:"Claimed",desc:`Claimed ${U(q(l.cetus_amount,9),9)} CETUS successfully.`,hash:r.hash,tit:"CETUS Claimed",icon:"icon-icon-Removed",tokenInfo:{tokena:"CETUS",numa:`+ ${q(l.cetus_amount,9)}`,logoa:G("/sui-image/WHALE-icon.png")}};te.value!=="Aptos"&&(B.res=r.res),E.value.showTransitionPending(B);const W=await E.value.watchTransaction(B);console.log("0221###swap###transitionStatus####",W),W&&setTimeout(()=>{e.getOwnerLockCetuss(p.value.address),e.getAccountWhaleBalance(p.value.address),e.getOwnerVeNFT(p.value.address),e.getMyShare(p.value.address),e.getAvailableXCetus(),v.value=!1},3e3)}else I(!1),O(!0),v.value=!1;s.value="",i.value=""}catch(r){I(!1),O(!0),v.value=!1,s.value="",i.value="",e.setClaimLoading(""),console.log(r,"error===>")}},Qe=()=>{F.value=="Redeem"?Ue():Ee()},de=d(()=>n.value.pendingCoinInfo),ce=d(()=>n.value.pendingAmount),me=w(!1);return{validateInput:()=>{A.value&&(A.value=A.value.replace(/[^\d]/g,""),A.value.charAt(0)==="0"&&(A.value=A.value.slice(1)))},countDown:Ge,value:c,change:y,clickExchange:ee,fromCoinAmount:s,toCoinAmount:i,showCoinSelect:h,headSwitchValue:f,headSwitchChange:ye,vestingDateList:o,vestingParameter:A,vestingTab:xe,holderList:k,lockupList:N,leaderboardList:x,whaleBalance:j,depositCetus:Ee,btnText:F,loading:v,redeemRatio:Te,halfBalanne:Xe,maxBalanne:je,xWhaleBalance:ue,availableXwhale:M,redeemingXwhale:Ce,withdrawWhale:Ue,ownerLocks:ne,cancelRedeemPayload:Ze,holderInfo:qe,btnDisabled:re,fixedFromCoin:Q,walletStore:Z,claimWhale:Ke,wallet:p,depositOrWithdraw:Qe,pendingAmount:ce,claimPendingYield:async()=>{me.value=!0,I(!0),V(""),oe(`${m("tips.claimingPendingYield")} ${ce.value} ${de.value.symbol}`);try{let l;const r=await P.getRedeemDividendPayload(u.value);console.log(r,"payload==>");const S=await p.value.currentWallet.signAndExecuteTransactionBlock(r);if(l=E.value.handleTx(S),l&&l.hash){V(l.hash),I(!1),ae(!0);const $={title:"Claim",desc:`Claimed ${ce.value} ${de.value.symbol} successfully.`,hash:l.hash,tit:"Claimed Rewards",icon:"icon-icon-Removed",tokenInfo:{tokena:de.value.symbol,numa:`+ ${ce.value}`,logoa:de.value.logo_url}};te.value!=="Aptos"&&($.res=l.res),E.value.showTransitionPending($);const B=await E.value.watchTransaction($);console.log("0221###swap###transitionStatus####",B),B&&setTimeout(()=>{e.getVeNFTDividendInfo(),me.value=!1},3e3),e.getOwnerLockCetuss(p.value.address)}else I(!1),O(!0),me.value=!1,v.value=!1}catch(l){I(!1),O(!0),me.value=!1,console.log(l,"error===>")}},inputBlur:()=>{Number(A.value)<15&&(A.value="15")},getNextEpoch:()=>{e.getDividendManager()}}}});const se=e=>(z("data-v-384bbafb"),e=e(),J(),e),Tt={class:"dashboard-all"},At={class:"dashboard-content"},It={class:"content-left"},kt={key:0,class:"vesting"},Bt=se(()=>t("p",null,"Vesting",-1)),Nt={class:"content-right"},xt={key:0,class:"card-container"},Dt={class:"card-item"},Et={class:"card-item"},Ut={class:"exchange"},$t=se(()=>t("use",{"xlink:href":"#icon-icon-swap2"},null,-1)),Rt=[$t],Pt={key:1,class:"card-redeem"},Wt={class:"card-item"},Lt={class:"vesting-duration"},Mt=se(()=>t("p",null,"Vesting duration",-1)),Ot={class:"vesting-content"},Vt={class:"vesting-left"},Ft={class:"value-days"},Ht=se(()=>t("span",null,"days",-1)),Yt={class:"vesting-right"},Xt=["onClick"],jt={class:"card-item"},Zt={class:"redeem-ratio"},qt=se(()=>t("span",null,"Redeem ratio",-1));function Gt(e,n,u,a,b,C){const c=ze,y=Vn,s=it,i=dn,h=yt,f=rn,m=fe;return g(),T("div",Tt,[R(c,{title:"Dashboard","total-xwhale":e.xWhaleBalance,"available-xwhale":e.availableXwhale,"redeeming-xwhale":e.redeemingXwhale},null,8,["total-xwhale","available-xwhale","redeeming-xwhale"]),t("div",At,[t("div",It,[R(y,{"holder-info":e.holderInfo,"pending-amount":e.pendingAmount,"claim-loading":e.claimLoading,onClaimPendingYield:e.claimPendingYield,onGetNextEpoch:e.getNextEpoch},null,8,["holder-info","pending-amount","claim-loading","onClaimPendingYield","onGetNextEpoch"]),e.ownerLocks&&e.ownerLocks.length>0?(g(),T("div",kt,[Bt,(g(!0),T($e,null,Re(e.ownerLocks,o=>(g(),L(s,{key:o,"v-item":o,loading:e.loading,onCountDown:e.countDown,onClaimWhale:e.claimWhale,onCancelRedeemPayload:e.cancelRedeemPayload},null,8,["v-item","loading","onCountDown","onClaimWhale","onCancelRedeemPayload"]))),128))])):Y("",!0)]),t("div",Nt,[R(i,{"head-switch-value":e.headSwitchValue,"left-text":"Get xCETUS","right-text":"Redeem CETUS",onHeadSwitchChange:n[0]||(n[0]=o=>{e.headSwitchChange(o)})},null,8,["head-switch-value"]),e.headSwitchValue=="convert"?(g(),T("div",xt,[t("div",Dt,[R(h,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":n[1]||(n[1]=o=>e.fromCoinAmount=o),"input-value":e.fromCoinAmount,"coin-symbol":"CETUS","whale-direction":"From",balance:e.whaleBalance,onHalfBalanne:e.halfBalanne,onMaxBalanne:e.maxBalanne,onOnInput:n[2]||(n[2]=o=>{e.fromCoinAmount=o})},null,8,["modelValue","input-value","balance","onHalfBalanne","onMaxBalanne"])]),t("div",Et,[R(h,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":n[3]||(n[3]=o=>e.fromCoinAmount=o),"input-value":e.fromCoinAmount,"coin-symbol":"xCETUS","whale-direction":"To",balance:e.availableXwhale,onOnInput:n[4]||(n[4]=o=>{e.fromCoinAmount=o})},null,8,["modelValue","input-value","balance"])]),t("img",{class:ge(e.change?"gang animationex":"gang"),src:cn,alt:""},null,2),t("div",Ut,[(g(),T("svg",{class:ge(e.change?"icon animationex":"icon"),"aria-hidden":"true"},Rt,2))])])):(g(),T("div",Pt,[t("div",Wt,[R(h,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":n[5]||(n[5]=o=>e.fromCoinAmount=o),"input-value":e.fromCoinAmount,"coin-symbol":"xCETUS","whale-direction":"From",balance:e.availableXwhale,onHalfBalanne:e.halfBalanne,onMaxBalanne:e.maxBalanne,onOnInput:n[6]||(n[6]=o=>{e.fixedFromCoin=!0,e.fromCoinAmount=o})},null,8,["modelValue","input-value","balance","onHalfBalanne","onMaxBalanne"])]),t("div",Lt,[Mt,t("div",Ot,[t("div",Vt,[t("div",Ft,[sn(t("input",{"onUpdate:modelValue":n[7]||(n[7]=o=>e.vestingParameter=o),onInput:n[8]||(n[8]=(...o)=>e.validateInput&&e.validateInput(...o)),onBlur:n[9]||(n[9]=(...o)=>e.inputBlur&&e.inputBlur(...o))},null,544),[[un,e.vestingParameter]])]),Ht]),t("div",Yt,[(g(!0),T($e,null,Re(e.vestingDateList,o=>(g(),T("div",{key:o.time,class:ge(["box-table",{"box-table-active":o.num===Number(e.vestingParameter)}]),onClick:k=>e.vestingTab(o.num)},_(o.time),11,Xt))),128))])]),R(f,{value:e.vestingParameter,"onUpdate:value":n[10]||(n[10]=o=>e.vestingParameter=o),max:180,min:15},null,8,["value"])]),t("div",jt,[R(h,{modelValue:e.toCoinAmount,"onUpdate:modelValue":n[11]||(n[11]=o=>e.toCoinAmount=o),"input-value":e.toCoinAmount,"coin-symbol":"CETUS","whale-direction":"To",balance:e.whaleBalance,onOnInput:n[12]||(n[12]=o=>{e.fixedFromCoin=!1,e.toCoinAmount=o})},null,8,["modelValue","input-value","balance"])]),t("div",Zt,[qt,t("p",null,_(e.redeemRatio)+"%",1)])])),e.wallet&&e.wallet.address?(g(),L(m,{key:2,class:"big-btn",loading:e.loading,disabled:e.btnDisabled,onClick:e.depositOrWithdraw},{default:X(()=>[t("span",null,_(e.btnText),1)]),_:1},8,["loading","disabled","onClick"])):(g(),L(m,{key:3,class:"big-btn",onClick:n[13]||(n[13]=o=>e.walletStore.setIsShowWalletModal(!0))},{default:X(()=>[t("span",null,_(e.$t("button.connectWallet")),1)]),_:1}))])])])}const va=K(St,[["render",Gt],["__scopeId","data-v-384bbafb"]]);export{va as default};
